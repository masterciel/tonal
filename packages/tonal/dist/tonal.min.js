(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var tonalPitches=require("tonal-pitches");var tonalDistances=require("tonal-distances");var SEP=/\s*\|\s*|\s*,\s*|\s+/;function asArr(src){return tonalPitches.isArr(src)?src:typeof src==="string"?src.trim().split(SEP):src===null||typeof src==="undefined"?[]:[src]}function map(fn,list){return arguments.length>1?map(fn)(list):function(l){return asArr(l).map(fn)}}function filter(fn,list){return arguments.length>1?filter(fn)(list):function(l){return asArr(l).filter(fn)}}var listToStr=function listToStr(v){return tonalPitches.isPitch(v)?tonalPitches.toPitchStr(v):tonalPitches.isArr(v)?v.map(tonalPitches.toPitchStr):v};var listFn=function listFn(fn){return function(src){var param=asArr(src).map(tonalPitches.asPitch);var result=fn(param);return listToStr(result)}};var harmonizer=function harmonizer(list){return function(pitch){return listFn(function(list){return list.map(tonalDistances.tr(pitch||"P1")).filter(tonalPitches.id)})(list)}};var harmonize=function harmonize(list,pitch){return arguments.length>1?harmonizer(list)(pitch):harmonizer(list)};var objHeight=function objHeight(p){if(!p)return-Infinity;var f=p[1]*7;var o=tonalPitches.isNum(p[2])?p[2]:-Math.floor(f/12)-10;return f+o*12};var ascComp=function ascComp(a,b){return objHeight(a)-objHeight(b)};var descComp=function descComp(a,b){return-ascComp(a,b)};function sort(comp,list){if(arguments.length>1)return sort(comp)(list);var fn=comp===true||comp===null?ascComp:comp===false?descComp:comp;return listFn(function(arr){return arr.sort(fn)})}var shuffle=listFn(function(arr){var i,t;var m=arr.length;while(m){i=Math.random()*m--|0;t=arr[m];arr[m]=arr[i];arr[i]=t}return arr});exports.asArr=asArr;exports.map=map;exports.filter=filter;exports.listFn=listFn;exports.harmonizer=harmonizer;exports.harmonize=harmonize;exports.sort=sort;exports.shuffle=shuffle},{"tonal-distances":2,"tonal-pitches":3}],2:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-distances")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-distances":4}],3:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-pitches")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-pitches":13}],4:[function(require,module,exports){"use strict";var tonalPitches=require("tonal-pitches");function trBy(i,p){if(p===null)return null;var f=i[1]+p[1];if(p.length===2)return tonalPitches.pcPitch(f);var o=i[2]+p[2];if(p.length===3)return tonalPitches.notePitch(f,o);return tonalPitches.ivlPitch(f,o)}function transpose(a,b){if(arguments.length===1)return function(b){return transpose(a,b)};var pa=tonalPitches.asPitch(a);var pb=tonalPitches.asPitch(b);var r=tonalPitches.isIvlPitch(pa)?trBy(pa,pb):tonalPitches.isIvlPitch(pb)?trBy(pb,pa):null;return a===pa&&b===pb?r:tonalPitches.toPitchStr(r)}var tr=transpose;function substr(a,b){if(a.length!==b.length)return null;return tonalPitches.isPitchClass(a)?tonalPitches.ivlPitch(b[1]-a[1]):tonalPitches.ivlPitch(b[1]-a[1],b[2]-a[2])}function interval(a,b){if(arguments.length===1)return function(b){return distance(a,b)};var pa=tonalPitches.asPitch(a);var pb=tonalPitches.asPitch(b);var i=substr(pa,pb);return a===pa&&b===pb?i:tonalPitches.toIvlStr(i)}var distance=interval;var dist=interval;function fifthsFrom(t,n){if(arguments.length>1)return fifthsFrom(t)(n);return function(n){return tr(t,tonalPitches.ivlPitch(n,0))}}exports.transpose=transpose;exports.tr=tr;exports.interval=interval;exports.distance=distance;exports.dist=dist;exports.fifthsFrom=fifthsFrom},{"tonal-pitches":5}],5:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-pitches":13,dup:3}],6:[function(require,module,exports){"use strict";var tonalMidi=require("tonal-midi");var wellTempered=function wellTempered(ref){return function(pitch){var m=tonalMidi.toMidi(pitch);return m?Math.pow(2,(m-69)/12)*ref:null}};var toFreq=wellTempered(440);exports.wellTempered=wellTempered;exports.toFreq=toFreq},{"tonal-midi":7}],7:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-midi")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-midi":8}],8:[function(require,module,exports){"use strict";var tonalPitches=require("tonal-pitches");var isMidi=function isMidi(m){return tonalPitches.isValue(m)&&!tonalPitches.isArr(m)&&m>=0&&m<128};function toMidi(val){var p=tonalPitches.asNote(val);return tonalPitches.hasOct(p)?tonalPitches.height(p)+12:isMidi(val)?+val:null}var FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");var SHARPS="C C# D D# E F F# G G# A A# B".split(" ");var fromMidiFn=function fromMidiFn(pcs){return function(m){var pc=pcs[m%12];var o=Math.floor(m/12)-1;return pc+o}};var fromMidi=fromMidiFn(FLATS);var fromMidiSharps=fromMidiFn(SHARPS);exports.isMidi=isMidi;exports.toMidi=toMidi;exports.fromMidi=fromMidi;exports.fromMidiSharps=fromMidiSharps},{"tonal-pitches":9}],9:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-pitches":13,dup:3}],10:[function(require,module,exports){"use strict";var tonalPitches=require("tonal-pitches");var tonalDistances=require("tonal-distances");var noteName=tonalPitches.noteFn(tonalPitches.id);var pc=tonalPitches.noteFn(function(p){return["tnl",p[1]]});var ASC=["tnl",-12,7,1];var DESC=["tnl",12,-7,-1];function enharmonics(pitch){var enharmonics=[];enharmonics.push(tonalDistances.transpose(DESC,pitch));if(enharmonics[0]===null)return null;enharmonics.push(pitch);enharmonics.push(tonalDistances.transpose(ASC,pitch));return enharmonics}function simplify(pitch){return enharmonics(pitch).reduce(function(simple,next){if(!simple)return next;return simple.length>next.length?next:simple},null)}exports.noteName=noteName;exports.pc=pc;exports.enharmonics=enharmonics;exports.simplify=simplify;exports.chroma=tonalPitches.chroma},{"tonal-distances":11,"tonal-pitches":12}],11:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-distances":4,dup:2}],12:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-pitches":13,dup:3}],13:[function(require,module,exports){"use strict";var noteParse=require("note-parser").parse;var ivlNttn=require("interval-notation");var isArr=Array.isArray;var isNum=function isNum(n){return typeof n==="number"};var isStr=function isStr(o){return typeof o==="string"};var isDef=function isDef(o){return typeof o!=="undefined"};var isValue=function isValue(v){return v!==null&&typeof v!=="undefined"};var id=function id(x){return x};var pcPitch=function pcPitch(f){return["tnl",f]};var notePitch=function notePitch(f,o){return["tnl",f,o]};var calcDir=function calcDir(f,o){return encDir(7*f+12*o)};var ivlPitch=function ivlPitch(f,o,d){var oct=isNum(o)?o:-fOcts(f);return["tnl",f,oct,d||calcDir(f,oct)]};var isPitch=function isPitch(p){return p&&p[0]==="tnl"};var isPitchClass=function isPitchClass(p){return isPitch(p)&&p.length===2};var hasOct=function hasOct(p){return isPitch(p)&&isNum(p[2])};var isNotePitch=function isNotePitch(p){return hasOct(p)&&p.length===3};var isIvlPitch=function isIvlPitch(i){return hasOct(i)&&isNum(i[3])};var isPitchNotIvl=function isPitchNotIvl(i){return isPitch(i)&&!isDef(i[3])};var height=function height(p){return p[1]*7+12*p[2]};var FIFTHS=[0,2,4,-1,1,3,5];var encPC=function encPC(step,alt){return FIFTHS[step]+7*alt};var fOcts=function fOcts(f){return Math.floor(f*7/12)};var FIFTH_OCTS=FIFTHS.map(fOcts);var encOct=function encOct(step,alt,oct){return oct-FIFTH_OCTS[step]-4*alt};var encDir=function encDir(n){return n<0?-1:1};function encode(step,alt,oct,dir){if(step<0||step>6)return null;var pc=encPC(step,alt||0);if(!isNum(oct))return pcPitch(pc);var o=encOct(step,alt,oct);if(!isNum(dir))return notePitch(pc,o);var d=encDir(dir);return ivlPitch(d*pc,d*o,d)}function unaltered(f){var i=(f+1)%7;return i<0?7+i:i}var decodeStep=function decodeStep(f){return STEPS[unaltered(f)]};var decodeAlt=function decodeAlt(f){return Math.floor((f+1)/7)};var STEPS=[3,0,4,1,5,2,6];function decode(p){var s=decodeStep(p[1]);var a=decodeAlt(p[1]);var o=isNum(p[2])?p[2]+4*a+FIFTH_OCTS[s]:null;return{step:s,alt:a,oct:o,dir:p[3]||null}}var cached=function cached(parser){var cache={};return function(str){if(typeof str!=="string")return null;return cache[str]||(cache[str]=parser(str))}};var parseNote=cached(function(str){var n=noteParse(str);return n?encode(n.step,n.alt,n.oct):null});var isNoteStr=function isNoteStr(s){return parseNote(s)!==null};var parseIvl=cached(function(str){var i=ivlNttn.parse(str);return i?encode(i.simple-1,i.alt,i.oct,i.dir):null});var isIvlStr=function isIvlStr(s){return parseIvl(s)!==null};var parsePitch=function parsePitch(str){return parseNote(str)||parseIvl(str)};var toLetter=function toLetter(s){return"CDEFGAB"[s%7]};var fillStr=function fillStr(s,num){return Array(Math.abs(num)+1).join(s)};var toAcc=function toAcc(n){return fillStr(n<0?"b":"#",n)};var strNum=function strNum(n){return n!==null?n:""};function strNote(n){var p=isPitch(n)&&!n[3]?decode(n):null;return p?toLetter(p.step)+toAcc(p.alt)+strNum(p.oct):null}var isAsc=function isAsc(p){return p.dir===1};var isPerf=function isPerf(p){return ivlNttn.type(p.step+1)==="P"};var calcNum=function calcNum(p){return isAsc(p)?p.step+1+7*p.oct:8-p.step-7*(p.oct+1)};var calcAlt=function calcAlt(p){return isAsc(p)?p.alt:isPerf(p)?-p.alt:-(p.alt+1)};function strIvl(pitch){var p=isIvlPitch(pitch)?decode(pitch):null;if(!p)return null;var num=calcNum(p);return p.dir*num+ivlNttn.altToQ(num,calcAlt(p))}var strPitch=function strPitch(p){return p[3]?strIvl(p):strNote(p)};var notation=function notation(parse,str){return function(v){return!isPitch(v)?parse(v):str(v)}};var asNote=notation(parseNote,id);var asIvl=notation(parseIvl,id);var asPitch=notation(parsePitch,id);var toNoteStr=notation(id,strNote);var toIvlStr=notation(id,strIvl);var toPitchStr=notation(id,strPitch);var pitchOp=function pitchOp(parse,to){return function(fn){return function(v){var isP=isPitch(v);if(isP)return fn(v);var p=parse(v);return p?to(fn(p)):null}}};var noteFn=pitchOp(parseNote,toNoteStr);var ivlFn=pitchOp(parseIvl,toIvlStr);var pitchFn=pitchOp(parsePitch,toPitchStr);var chroma=pitchFn(function(n){return 7*n[1]-12*fOcts(n[1])});exports.isArr=isArr;exports.isNum=isNum;exports.isStr=isStr;exports.isDef=isDef;exports.isValue=isValue;exports.id=id;exports.pcPitch=pcPitch;exports.notePitch=notePitch;exports.ivlPitch=ivlPitch;exports.isPitch=isPitch;exports.isPitchClass=isPitchClass;exports.hasOct=hasOct;exports.isNotePitch=isNotePitch;exports.isIvlPitch=isIvlPitch;exports.isPitchNotIvl=isPitchNotIvl;exports.height=height;exports.encode=encode;exports.decode=decode;exports.parseNote=parseNote;exports.isNoteStr=isNoteStr;exports.parseIvl=parseIvl;exports.isIvlStr=isIvlStr;exports.parsePitch=parsePitch;exports.toLetter=toLetter;exports.toAcc=toAcc;exports.strNote=strNote;exports.strIvl=strIvl;exports.asNote=asNote;exports.asIvl=asIvl;exports.asPitch=asPitch;exports.toNoteStr=toNoteStr;exports.toIvlStr=toIvlStr;exports.toPitchStr=toPitchStr;exports.noteFn=noteFn;exports.ivlFn=ivlFn;exports.pitchFn=pitchFn;exports.chroma=chroma},{"interval-notation":14,"note-parser":15}],14:[function(require,module,exports){"use strict";var IVL_TNL="([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4})";var IVL_STR="(AA|A|P|M|m|d|dd)([-+]?)(\\d+)";var COMPOSE="(?:("+IVL_TNL+")|("+IVL_STR+"))";var IVL_REGEX=new RegExp("^"+COMPOSE+"$");function parse(str){if(typeof str!=="string")return null;var m=IVL_REGEX.exec(str);if(!m)return null;var i={num:+(m[3]||m[8]),q:m[4]||m[6]};i.dir=(m[2]||m[7])==="-"?-1:1;var step=(i.num-1)%7;i.simple=step+1;i.type=TYPES[step];i.alt=qToAlt(i.type,i.q);i.oct=Math.floor((i.num-1)/7);i.size=i.dir*(SIZES[step]+i.alt+12*i.oct);return i}var SIZES=[0,2,4,5,7,9,11];var TYPES="PMMPPMM";function type(num){return TYPES[(num-1)%7]}function dirStr(dir){return dir===-1?"-":""}function num(simple,oct){return simple+7*oct}function shorthand(simple,alt,oct,dir){return altToQ(simple,alt)+dirStr(dir)+num(simple,oct)}function build(simple,alt,oct,dir){return dirStr(dir)+num(simple,oct)+altToQ(simple,alt)}function qToAlt(num,q){var t=typeof num==="number"?type(num):num;if(q==="M"&&t==="M")return 0;if(q==="P"&&t==="P")return 0;if(q==="m"&&t==="M")return-1;if(/^A+$/.test(q))return q.length;if(/^d+$/.test(q))return t==="P"?-q.length:-q.length-1;return null}function fillStr(s,n){return Array(Math.abs(n)+1).join(s)}function altToQ(num,alt){var t=typeof num==="number"?type(Math.abs(num)):num;if(alt===0)return t==="M"?"M":"P";else if(alt===-1&&t==="M")return"m";else if(alt>0)return fillStr("A",alt);else if(alt<0)return fillStr("d",t==="P"?alt:alt+1);else return null}module.exports={parse:parse,type:type,altToQ:altToQ,qToAlt:qToAlt,build:build,shorthand:shorthand}},{}],15:[function(require,module,exports){"use strict";var REGEX=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function regex(){return REGEX}var SEMITONES=[0,2,4,5,7,9,11];function parse(str,isTonic,tuning){if(typeof str!=="string")return null;var m=REGEX.exec(str);if(!m||!isTonic&&m[4])return null;tuning=tuning||440;var p={letter:m[1].toUpperCase(),acc:m[2].replace(/x/g,"##")};p.pc=p.letter+p.acc;p.step=(p.letter.charCodeAt(0)+3)%7;p.alt=p.acc[0]==="b"?-p.acc.length:p.acc.length;p.chroma=SEMITONES[p.step]+p.alt;if(m[3]){p.oct=+m[3];p.midi=p.chroma+12*(p.oct+1);p.freq=Math.pow(2,(p.midi-69)/12)*tuning}if(isTonic)p.tonicOf=m[4];return p}function getter(lib,name){lib[name]=function(src){var p=parse(src);return p&&typeof p[name]!=="undefined"?p[name]:null};return lib}var PROPS=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];var parser=PROPS.reduce(getter,{});parser.regex=regex;parser.parse=parse;module.exports=parser},{}],16:[function(require,module,exports){"use strict";var tonalPitches=require("tonal-pitches");var tonalNotes=require("tonal-notes");var tonalArrays=require("tonal-arrays");var tonalDistances=require("tonal-distances");var tonalMidi=require("tonal-midi");var isNum=function isNum(n){return typeof n==="number"};var ascR=function ascR(b,n){for(var a=[];n--;a[n]=n+b){}return a};var descR=function descR(b,n){for(var a=[];n--;a[n]=b-n){}return a};function midiRange(a,b){var ma=isNum(a)?a:tonalMidi.toMidi(a);var mb=isNum(b)?b:tonalMidi.toMidi(b);return ma===null||mb===null?[]:ma<mb?ascR(ma,mb-ma+1):descR(ma,ma-mb+1)}var buildNote=function buildNote(pc,midi){return pc+(Math.floor(midi/12)-1)};function fromPitchSet(notes,m){if(arguments.length>1)return fromPitchSet(notes)(m);var scale=tonalArrays.map(tonalNotes.pc,notes);var chromas=tonalArrays.map(tonalPitches.chroma,scale);return function(midi){var pcIndex=chromas.indexOf(midi%12);return pcIndex>-1?buildNote(scale[pcIndex],midi):null}}function noteRange(fn,a,b){if(arguments.length===1)return function(a,b){return noteRange(fn,a,b)};return midiRange(a,b).map(fn).filter(function(x){return x!==null})}var chromatic=noteRange(tonalMidi.fromMidi);var cycleOfFifths=function cycleOfFifths(s,e,t){return midiRange(s,e).map(tonalDistances.fifthsFrom(t))};function scaleRange(src,start,end){return noteRange(fromPitchSet(src),start,end)}exports.midiRange=midiRange;exports.fromPitchSet=fromPitchSet;exports.noteRange=noteRange;exports.chromatic=chromatic;exports.cycleOfFifths=cycleOfFifths;exports.scaleRange=scaleRange},{"tonal-arrays":17,"tonal-distances":18,"tonal-midi":19,"tonal-notes":20,"tonal-pitches":21}],17:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-arrays")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-arrays":1}],18:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-distances":4,dup:2}],19:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-midi":8,dup:7}],20:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-notes")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-notes":10}],21:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-pitches":13,dup:3}],22:[function(require,module,exports){"use strict";var tonalNotes=require("tonal-notes");var tonalDistances=require("tonal-distances");var tonalMidi=require("tonal-midi");var tonalFreq=require("tonal-freq");var tonalArrays=require("tonal-arrays");var tonalRanges=require("tonal-ranges");exports.noteName=tonalNotes.noteName;exports.chroma=tonalNotes.chroma;exports.pc=tonalNotes.pc;exports.enharmonics=tonalNotes.enharmonics;exports.simplify=tonalNotes.simplify;exports.transpose=tonalDistances.transpose;exports.tr=tonalDistances.tr;exports.interval=tonalDistances.interval;exports.distance=tonalDistances.distance;exports.dist=tonalDistances.dist;exports.fifthsFrom=tonalDistances.fifthsFrom;exports.toMidi=tonalMidi.toMidi;exports.fromMidi=tonalMidi.fromMidi;exports.fromMidiSharps=tonalMidi.fromMidiSharps;exports.toFreq=tonalFreq.toFreq;exports.asArr=tonalArrays.asArr;exports.map=tonalArrays.map;exports.filter=tonalArrays.filter;exports.listFn=tonalArrays.listFn;exports.harmonizer=tonalArrays.harmonizer;exports.harmonize=tonalArrays.harmonize;exports.shuffle=tonalArrays.shuffle;exports.midiRange=tonalRanges.midiRange;exports.chromatic=tonalRanges.chromatic;exports.cycleOfFifths=tonalRanges.cycleOfFifths;exports.scaleRange=tonalRanges.scaleRange},{"tonal-arrays":23,"tonal-distances":24,"tonal-freq":25,"tonal-midi":26,"tonal-notes":27,"tonal-ranges":28}],23:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-arrays":1,dup:17}],24:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-distances":4,dup:2}],25:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-freq")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-freq":6}],26:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-midi":8,dup:7}],27:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{"/Users/Dani/Code/Js16/tnl/packages/tonal-notes":10,dup:20}],28:[function(require,module,exports){module.exports=require("/Users/Dani/Code/Js16/tnl/packages/tonal-ranges")},{"/Users/Dani/Code/Js16/tnl/packages/tonal-ranges":16}]},{},[22]);
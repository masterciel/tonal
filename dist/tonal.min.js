!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("tonal-progression")):"function"==typeof define&&define.amd?define(["tonal-progression"],t):n.Tonal=t(n.progression)}(this,function(n){"use strict";function t(n,t){return Array(t+1).join(n)}function r(n){return"number"==typeof n}function e(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function u(n,t,r){if("string"!=typeof n)return null;var u=Mr.exec(n);if(!u||!t&&u[4])return null;var i={letter:u[1].toUpperCase(),acc:u[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length;var o=lr[i.step]+i.alt;return i.chroma=o<0?12+o:o%12,u[3]&&(i.oct=+u[3],i.midi=o+12*(i.oct+1),i.freq=e(i.midi,r)),t&&(i.tonicOf=u[4]),i}function i(n){return r(n)?n<0?t("b",-n):t("#",n):""}function o(n){return r(n)?""+n:""}function m(n,t,r){return null===n||void 0===n?null:n.step?m(n.step,n.alt,n.oct):n<0||n>6?null:fr.charAt(n)+i(t)+o(r)}function a(n,t){if("string"!=typeof n)return null;var r=sr.exec(n);if(!r)return null;var e={num:+(r[3]||r[8]),q:r[4]||r[6]};e.dir="-"===(r[2]||r[7])?-1:1;var u=(e.num-1)%7;return e.simple=u+1,e.type=pr[u],e.alt=P(e.type,e.q),e.oct=Math.floor((e.num-1)/7),e.size=e.dir*(dr[u]+e.alt+12*e.oct),!1!==t&&"M"===e.type&&"P"===e.q?null:e}function c(n){return pr[(n-1)%7]}function P(n,t){var r="number"==typeof n?c(n):n;return"M"===t&&"M"===r?0:"P"===t&&"P"===r?0:"m"===t&&"M"===r?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===r?-t.length:-t.length-1:null}function M(n,t){return Array(Math.abs(t)+1).join(n)}function l(n,t){var r="number"==typeof n?c(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?M("A",t):t<0?M("d","P"===r?t:t+1):null}function f(n){return"number"==typeof n}function s(n){return Math.floor(7*n/12)}function d(n,t,r){var e=hr[n]+7*t;return f(r)?[e,r-br[n]-4*t]:[e]}function p(n){var t=(n+1)%7;return t<0?7+t:t}function h(n,t){var r=vr[p(n)],e=Math.floor((n+1)/7);return f(t)?[r,e,t+4*e+br[r]]:[r,e]}function b(n,t,r){return r?["tnlp",[n,t],r]:["tnlp",[n,t]]}function v(n){return Array.isArray(n)&&"tnlp"===n[0]}function A(n,t,r,e){return e?["tnlp",d(n,t,r),e]:["tnlp",d(n,t,r)]}function g(n){return h.apply(null,n[1])}function y(n){return v(n)?n[2]?"ivl":"note":null}function j(n){return"note"===y(n)}function x(n){return"ivl"===y(n)}function O(n){return v(n)&&1===n[1].length}function z(n){return-1===n[2]?-1:1}function C(n){return-1===n[2]?-n[1][0]:n[1][0]}function _(n){return-1===n[2]?-n[1][1]:n[1][1]}function w(n){return 7*C(n)+12*_(n)}function F(n){var t=C(n);return 7*t-12*Math.floor(7*t/12)}function q(n){var t={};return function(r){return"string"!=typeof r?null:t[r]||(t[r]=n(r))}}function E(n){return Ar(n)||gr(n)}function G(n){return j(n)?n:Ar(n)}function k(n){return x(n)?n:gr(n)}function D(n){return v(n)?n:E(n)}function B(n){return j(n)?m.apply(null,g(n)):null}function $(n){if(!x(n))return null;var t=g(n),r=t[0]+1+7*t[2];return n[2]*r+l(r,t[1])}function N(n){return B(n)||$(n)}function I(n,t,r){return function(e){return function(u){if(n(u))return e(u);var i=t(u);return i?r(e(i)):null}}}function S(n,t){var r=y(t);if(!r)return null;var e=C(n)+C(t);if(O(t))return["tnlp",[e]];var u=_(n)+_(t);if("note"===r)return["tnlp",[e,u]];var i=w(n)+w(t)<0?-1:1;return["tnlp",[i*e,i*u],i]}function T(n,t){if(1===arguments.length)return function(t){return T(n,t)};var r=D(n),e=D(t),u=x(r)?S(r,e):x(e)?S(e,r):null;return n===r&&t===e?u:N(u)}function K(n,t){return arguments.length>1?K(n)(t):function(t){return T(n,b(t,0,1))}}function U(n,t){if(!n||!t||n[1].length!==t[1].length)return null;var r=C(t)-C(n);if(O(n))return b(r,-Math.floor(7*r/12),1);var e=_(t)-_(n),u=w(t)-w(n)<0?-1:1;return b(u*r,u*e,u)}function L(n,t){if(1===arguments.length)return function(t){return L(n,t)};var r=D(n),e=D(t),u=U(r,e);return n===r&&t===e?u:$(u)}function R(n,t){var r=U(D(n),D(t));return r?w(r):null}function H(n){return n||0===n}function J(n,t){return arguments.length>1?J(n)(t):function(t){return wr(t).map(n)}}function Q(n){return wr(n).filter(H)}function V(n,t){return arguments.length>1?V(n)(t):function(t){return wr(t).filter(n)}}function W(n){if(!n)return-1/0;var t=7*C(n);return t+12*(_(n)||-Math.floor(t/12)-100)}function X(n,t){return W(n)-W(t)}function Y(n,t){return-X(n,t)}function Z(n,t){var r=1===arguments.length||!0===t?X:!1===t?Y:"function"==typeof t?t:X;return n=Array.isArray(n)?n.slice():wr(n),an(function(n){return n.sort(r).filter(H)},n)}function nn(n){return T(b(0,n,1))}function tn(n,t){var r=wr(t),e=r.length,u=(n%e+e)%e;return r.slice(u,e).concat(r.slice(0,u))}function rn(n,t){return an(function(t){var r=t.length,e=(n%r+r)%r,u=t.slice(e,r),i=t.slice(0,e),o=R(u[r-e-1],i[0]);if(o<0){var m=Math.floor(o/12);n<0?u=u.map(nn(m)):i=i.map(nn(-m))}return u.concat(i)},t)}function en(n,t){if(1===arguments.length)return function(t){return en(n,t)};var r=wr(t);return wr(n).map(function(n){return r[n-1]||null})}function un(n){return n=wr(n),0===n.length?[[]]:un(n.slice(1)).reduce(function(t,r){return t.concat(n.map(function(t,e){var u=r.slice();return u.splice(e,0,n[0]),u}))},[])}function on(n){return N(n)||n}function mn(n){return v(n)?N(n):_r(n)?n.map(on):n}function an(n,t){if(1===arguments.length)return function(t){return an(n,t)};var r=wr(t).map(D);return mn(n(r))}function cn(n){var t=wr(n);return t.length?Q(t.map(L(t[0]))):t}function Pn(n){var t=[];n=wr(n);for(var r=1;r<n.length;r++)t.push(L(n[r-1],n[r]));return t}function Mn(n,t){return arguments.length>1?Mn(n)(t):function(t){return Q(J(T(t||"P1"),n))}}function ln(n,t){return Array(t+1).join(n)}function fn(n){return"number"==typeof n}function sn(n){return fn(n)?n<0?ln("b",-n):ln("#",n):""}function dn(n){return fn(n)?""+n:""}function pn(n,t,r){return null===n||void 0===n?null:n.step?pn(n.step,n.alt,n.oct):n<0||n>6?null:Gr.charAt(n)+sn(t)+dn(r)}function hn(n){return"number"==typeof n}function bn(n){return"string"==typeof n}function vn(n){return void 0!==n}function An(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function gn(n,t,r){if("string"!=typeof n)return null;var e=kr.exec(n);if(!e||!t&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,"##")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt="b"===u.acc[0]?-u.acc.length:u.acc.length;var i=Dr[u.step]+u.alt;return u.chroma=i<0?12+i:i%12,e[3]&&(u.oct=+e[3],u.midi=i+12*(u.oct+1),u.freq=An(u.midi,r)),t&&(u.tonicOf=e[4]),u}function yn(n){if((hn(n)||bn(n))&&n>=0&&n<128)return+n;var t=gn(n);return t&&vn(t.midi)?t.midi:null}function jn(n){return Array.isArray(n)&&2===n.length?7*n[0]+12*n[1]+12:yn(n)}function xn(n,t){return!0===n||!1===n?function(t){return xn(t,n)}:(n=Math.round(n),(!0===t?$r:Br)[n%12]+(Math.floor(n/12)-1))}function On(n,t){return n=!(!n&&0!==n)&&Math.pow(10,n),function(r){return r=t(r),null===r?null:n?Math.round(r*n)/n:r}}function zn(n,t,r){return arguments.length>2?zn(n,t)(r):On(t,function(t){var r=jn(t);return r?Math.pow(2,(r-69)/12)*n:null})}function Cn(n,t,r){return arguments.length>2?Cn(n,t)(r):On(t,function(t){return 12*(Math.log(t)-Math.log(n))/Math.log(2)+69})}function _n(n,t){return xn(Sr(n),t)}function wn(n,t){var r=Ir(n)||n,e=Ir(t)||t;return Math.round(Math.log(e/r)/Math.log(2)*1200)}function Fn(n){var t=G(n);return t?F(t):null}function qn(n){var t=G(n);return t?B(t):null}function En(n){var t=G(n);if(!t)return null;var r=g(t);return{step:r[0],alt:r[1],oct:r[2]}}function Gn(n){return n?pn(n.step,n.alt,n.oct):null}function kn(n){return function(t){var r=En(t);return r?r[n]:null}}function Dn(n){var t=G(n);return t?C(t):null}function Bn(n){var t=G(n);return t?B([t[0],[C(t)]]):null}function $n(n){var t=[];return t.push(T(Wr,n)),null===t[0]?null:(t.push(n),t.push(T(Vr,n)),t)}function Nn(n){return $n(n).reduce(function(n,t){return n?n.length>t.length?t:n:t},null)}function In(n){return Yr[(n-1)%7]}function Sn(n){return-1===n?"-":""}function Tn(n,t){return n+7*t}function Kn(n,t,r,e){return Sn(e)+Tn(n,r)+Ln(n,t)}function Un(n,t){return Array(Math.abs(t)+1).join(n)}function Ln(n,t){var r="number"==typeof n?In(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?Un("A",t):t<0?Un("d","P"===r?t:t+1):null}function Rn(n){var t=k(n);return t?$(t):null}function Hn(n){var t=Qn(n);return t?t.num:null}function Jn(n){var t=Qn(n);return t?t.num*t.dir:null}function Qn(n){var t=k(n);if(!t)return null;var r=g(t);return{num:r[0]+1+7*r[2],alt:r[1],dir:t[2]}}function Vn(n){if(!n||n.num<1)return null;var t=Math.floor(n.num/8);return Kn(n.num-7*t,n.alt||0,t,n.dir)}function Wn(n){var t=k(n);return t?w(t):null}function Xn(n){var t=n<0?-1:1,r=Math.abs(n),e=r%12,u=Math.floor(r/12);return t*(Zr[e]+7*u)+ne[e]}function Yn(n){var t=k(n),r=t?F(t):Math.round(n);return isNaN(r)?null:te[Math.abs(r)%12]}function Zn(n){var t=k(n);return t?re[g(t)[0]]:null}function nt(n){return parseInt(rt(n),2)}function tt(n){return n=D(n),n?F(n):null}function rt(n){if(it(n))return n;var t=[0,0,0,0,0,0,0,0,0,0,0,0];return J(tt,n).forEach(function(n){t[n]=1}),t.join("")}function et(n){var t=J(Bn,n);if(!t.length)return t;var r=t[0];return ot(tn(tt(r),rt(t).split("")).join(""),r)}function ut(n,t){t=!1!==t;var r=rt(n).split("");return Q(r.map(function(n,e){var u=tn(e,r);return t&&"0"===u[0]?null:u.join("")}))}function it(n){return oe.test(n)}function ot(n,t){return 1===arguments.length?function(t){return ot(n,t)}:it(n)?(t=t||"P1",Q(n.split("").map(function(n,r){return"1"===n?T(me[r],t):null}))):null}function mt(n,t){return 1===arguments.length?function(t){return mt(n,t)}:rt(n)===rt(t)}function at(n,t){return 1===arguments.length?function(t){return at(n,t)}:((t=nt(t))&nt(n))===t}function ct(n,t){return 1===arguments.length?function(t){return ct(n,t)}:((t=nt(t))|nt(n))===t}function Pt(n,t){return arguments.length>1?Pt(n)(t):(n=rt(n),function(t){return"1"===n[tt(t)]})}function Mt(n,t){return 1===arguments.length?function(t){return Mt(n,t)}:wr(t).filter(Pt(n))}function lt(n){return"number"==typeof n}function ft(n){return lt(n)?n:jn(n)}function st(n,t){for(var r=[];t--;r[t]=t+n);return r}function dt(n,t){for(var r=[];t--;r[t]=n-t);return r}function pt(n,t){return null===n||null===t?[]:n<t?st(n,t-n+1):dt(n,n-t+1)}function ht(n){return wr(n).map(ft).reduce(function(n,t,r){if(1===r)return pt(n,t);var e=n[n.length-1];return n.concat(pt(e,t).slice(1))})}function bt(n,t){return J(xn(!0===t),ht(n))}function vt(n,t){return ht(t).map(K(n))}function At(n,t){return 1===arguments.length?function(t){return At(n,t)}:Mt(n,bt(t))}function gt(n){var t="CDEFGAB".indexOf(n.toUpperCase());return t<0?null:t}function yt(n){return!(n<0||n>6)}function jt(n){return yt(n)?"CDEFGAB".charAt(n):null}function xt(n){return/^b+$/.test(n)}function Ot(n){return/^#+$/.test(n)}function zt(n){return""===n?0:xt(n)?-n.length:Ot(n)?n.length:null}function Ct(n,t){return Array(t+1).join(n)}function _t(n){return n?n<0?Ct("b",-n):Ct("#",n):""}function wt(n,t){return n?n+" "+t:t}function Ft(n){return wt(K("C",n),"major")}function qt(n){return le[Me.indexOf(n)]}function Et(n){return n=n.trim().toLowerCase(),-1===Me.indexOf(n)?null:n}function Gt(n){if("string"!=typeof n)return null;var t,r=n.indexOf(" ");if(-1===r){var e=Bn(n);t=e?{tonic:e,mode:"major"}:{tonic:!1,mode:Et(n)}}else t={tonic:Bn(n.slice(0,r)),mode:Et(n.slice(r+1))};return t.mode?t:null}function kt(n){return null!==Gt(n)}function Dt(n){return(Gt(n)||n||{}).tonic||null}function Bt(n){return(Gt(n)||n||{}).mode||null}function $t(n,t){return 1===arguments.length?function(t){return $t(n,t)}:!(n=Gt(n))||n.tonic?null:(t=Gt(t))&&t.tonic?wt(K(t.tonic,qt(n.mode)-qt(t.mode)),n.mode):null}function Nt(n){var t=Ut(n);return null===t?null:t<0?ht([-1,t]).map(K("F")):ht([1,t]).map(K("B"))}function It(n){return n?Me.slice():Me.slice(0,-2)}function St(n){return"number"==typeof n?Ft(n):null}function Tt(n){return Ot(n)?Ft(n.length):xt(n)?Ft(-n.length):null}function Kt(n){var t=Gt(n);return t&&t.tonic?Mn(fe[Me.indexOf(t.mode)],t.tonic):null}function Ut(n){var t=Gt(n);if(!t||!t.tonic)return null;var r=qt(t.mode);return Dn(t.tonic)-r}function Lt(n){return _t(Ut(n))}function Rt(n){return n}function Ht(n,t){t=t||Rt;var r={},e=Object.keys(n),u=[];return e.forEach(function(e){var i=t(n[e][0]);r[e]=i,n[e][1]&&n[e][1].forEach(function(n){r[n]=i,u.push(n)})}),{get:function(n){return r[n]},keys:function(n,t){var i=n?e.concat(u):e.slice();return"function"!=typeof t?i:i.filter(function(n){return t(n,r[n])})}}}function Jt(n,t){var r="string"==typeof t,e="function"==typeof t,u=n.keys(!1).reduce(function(t,r){return t[rt(n.get(r))]=r,t},{});return function(n){return n=Z(J(Bn,n)),Q(ut(n).map(function(i,o){var m=u[i];if(!m)return null;var a=n[o];return r?a+t+m:e?t(m,a):[m,a]}))}}function Qt(n,t){if(1===arguments.length)return function(t){return Qt(n,t)};var r=He.get(n);return r?Mn(r,t):null}function Vt(n){var t=Yt(n);return(t.tonic?Qt(t.type,Bn(t.tonic)):null)||Q(J(Bn,n).map(function(n,t,r){return r.indexOf(n)<t?null:n}))}function Wt(n){return Qt(Yt(n).type,!1)||[]}function Xt(n){return Wt(n).length>0}function Yt(n){if("string"!=typeof n)return null;var t=n.indexOf(" "),r=qn(n.substring(0,t))||!1;return{tonic:r,type:r?n.substring(t+1):n}}function Zt(){return We}function nr(n,t){if(1===arguments.length)return function(t){return nr(n,t)};var r=Tu.get(n);return r?Mn(r,t):null}function tr(n){var t=ar(n),r=Tu.get(t.type);return r?Mn(r,t.tonic):Q(J(qn,n))}function rr(n){var t=ar(n);return Tu.get(t.type)||[]}function er(n){return rr(n).length>0}function ur(n){var t=J(Bn,n),r=or(t);return r?r.indexOf(t[0]):null}function ir(n,t){if(1===arguments.length)return function(t){return ir(n,t)};var r=or(t);return r?tn(n,r):[]}function or(n){for(var t=un(tr(n).map(Bn)),r=0;r<t.length;r++){if(mr(Pn(t[r])))return t[r]}return null}function mr(n){for(var t=0;t<n.length;t++)if("3"!==n[t][0])return!1;return!0}function ar(n){var t=Zt().exec(n);return t?t[4]?"7"===t[3]||"6"===t[3]?{type:t[3]+t[4],tonic:t[1]+t[2]}:{type:t[4],tonic:t[1]+t[2]+t[3]}:{type:t[3],tonic:t[1]+t[2]}:{type:n,tonic:!1}}function cr(n){var t,r,e,u=Q(J(G,n)),i=u.length,o=[0,0,0,0,0,0];for(t=0;t<i;t++)for(r=t;r<i;r++)e=Yn(F(u[r])-F(u[t])),6===e?o[5]=o[5]+1:e>0&&(o[5-e]=o[5-e]+1);return o}function Pr(n){return Z(n).filter(function(n,t,r){return 0===t||n!==r[t-1]})}var Mr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,lr=[0,2,4,5,7,9,11],fr="CDEFGAB",sr=new RegExp("^(?:(([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4}))|((AA|A|P|M|m|d|dd)([-+]?)(\\d+)))$"),dr=[0,2,4,5,7,9,11],pr="PMMPPMM",hr=[0,2,4,-1,1,3,5],br=hr.map(s),vr=[3,0,4,1,5,2,6],Ar=q(function(n){var t=u(n);return t?A(t.step,t.alt,t.oct):null}),gr=q(function(n){var t=a(n);return t&&t?A(t.simple-1,t.alt,t.oct,t.dir):null}),yr=I(j,Ar,B),jr=I(x,gr,$),xr=I(v,E,N),Or=Object.freeze({pitch:b,isPitch:v,encode:A,decode:g,pType:y,isNotePitch:j,isIvlPitch:x,isPC:O,dir:z,fifths:C,focts:_,height:w,chr:F,parseNote:Ar,parseIvl:gr,parsePitch:E,asNotePitch:G,asIvlPitch:k,asPitch:D,strNote:B,strIvl:$,strPitch:N,noteFn:yr,ivlFn:jr,pitchFn:xr}),zr=Object.freeze({transpose:T,trFifths:K}),Cr=Object.freeze({interval:L,semitones:R}),_r=Array.isArray,wr=function(n){return function(t){return void 0===t?[]:Array.isArray(t)?t:"string"==typeof t?t.trim().split(n):[t]}}(/\s*\|\s*|\s*,\s*|\s+/),Fr=an(function(n){for(var t,r,e=n.length;e;)t=Math.random()*e--|0,r=n[e],n[e]=n[t],n[t]=r;return n}),qr=Object.freeze({asArr:wr,map:J,compact:Q,filter:V,sort:Z,shuffle:Fr,rotate:tn,rotateAsc:rn,select:en,permutations:un}),Er=Object.freeze({harmonics:cn,intervallic:Pn,harmonize:Mn}),Gr="CDEFGAB",kr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Dr=[0,2,4,5,7,9,11],Br="C Db D Eb E F Gb G Ab A Bb B".split(" "),$r="C C# D D# E F F# G G# A A# B".split(" "),Nr=Object.freeze({toMidi:jn,note:xn}),Ir=zn(440,2),Sr=Cn(440,2),Tr=Object.freeze({eqTempFreq:zn,toFreq:Ir,eqTempFreqToMidi:Cn,toMidi:Sr,note:_n,cents:wn}),Kr=jn,Ur=xn,Lr=Ir,Rr=qn,Hr=kn("oct"),Jr=kn("step"),Qr=kn("alt"),Vr=gr("2d"),Wr=gr("-2d"),Xr=Object.freeze({midi:Kr,fromMidi:Ur,freq:Lr,chroma:Fn,note:qn,name:Rr,props:En,fromProps:Gn,oct:Hr,step:Jr,pcFifths:Dn,alt:Qr,pc:Bn,enharmonics:$n,simplify:Nn}),Yr="PMMPPMM",Zr=[1,2,2,3,3,4,5,5,6,6,7,7],ne="P m M m M P d P m M m M".split(" "),te=[0,1,2,3,4,5,6,5,4,3,2,1],re="PMMPPMM",ee=jr(function(n){var t=g(n);return A((7-t[0])%7,"P"===re[t[0]]?-t[1]:-(t[1]+1),t[2],z(n))}),ue=jr(function(n){var t=g(n);return 0===t[0]&&1===t[2]||(t[2]=0),A(t[0],t[1],t[2],z(n))}),ie=Object.freeze({toInterval:Rn,num:Hn,value:Jn,props:Qn,fromProps:Vn,semitones:Wn,fromSemitones:Xn,ic:Yn,type:Zn,invert:ee,simplify:ue}),oe=/^[01]{12}$/,me="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" "),ae=Object.freeze({chroma:rt,notes:et,chromaModes:ut,isChroma:it,fromChroma:ot,equal:mt,subset:at,superset:ct,includes:Pt,filter:Mt}),ce=Object.freeze({numeric:ht,chromatic:bt,fifths:vt,pitchSet:At}),Pe=Object.freeze({toStep:gt,isStep:yt,toLetter:jt,areFlats:xt,areSharps:Ot,toAlt:zt,toAcc:_t}),Me=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian","major","minor"],le=[0,2,4,-1,1,3,5,0,3],fe=[0,1,2,3,4,5,6,0,5].map(function(n){return cn(tn(n,["C","D","E","F","G","A","B"]))}),se=Lt,de=Object.freeze({props:Gt,isKeyName:kt,tonic:Dt,mode:Bt,relative:$t,alteredNotes:Nt,modes:It,fromAlter:St,fromAcc:Tt,scale:Kt,alteration:Ut,signature:Lt,accidentals:se}),pe=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],he=["1P 2M 3M 4A 5P 6M 7M"],be=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],ve=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],Ae=["1P 2M 3m 4P 5P 6M 7m"],ge=["1P 2M 3m 4P 5P 6m 7m",["minor"]],ye=["1P 2m 3m 4P 5P 6m 7m"],je=["1P 2m 3m 4P 5d 6m 7m"],xe=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],Oe=["1P 2m 4P 5d 7m"],ze=["1P 2M 3m 5P 6m"],Ce=["1P 2m 4P 5P 6m"],_e=["1P 2m 3m 5P 6m"],we=["1P 2M 3M 4A 6M 7m"],Fe=["1P 2M 4P 5P 6M"],qe=["1P 2m 3M 5P 6M"],Ee=["1P 2M 4P 5P 6M 7m"],Ge=["1P 2A 3M 5P 5A 7M"],ke=["1P 2m 3m 4P 5P 6m 7M"],De=["1P 2M 3m 4P 5d 6m 6M 7M"],Be=["1P 2M 4P 5P 7m"],$e=["1P 2m 3M 4P 5d 6M 7m"],Ne=["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],Ie=["1P 2m 3m 3M 4A 5P 7m"],Se=["1P 2m 3m 4P 5P 6m 7M"],Te=["1P 2m 3M 4P 5d 6m 7M"],Ke=["1P 2M 3M 4P 5P 6M 7m 7M"],Ue=["1P 2m 3M 5d 6m 7m 7M"],Le=["1P 2M 3M 4P 5d 5P 6M 7M"],Re={chromatic:pe,lydian:he,major:be,mixolydian:ve,dorian:Ae,aeolian:ge,phrygian:ye,locrian:je,altered:xe,iwato:Oe,hirajoshi:ze,kumoijoshi:Ce,pelog:_e,prometheus:we,ritusen:Fe,scriabin:qe,piongio:Ee,augmented:Ge,neopolitan:ke,diminished:De,egyptian:Be,oriental:$e,spanish:Ne,flamenco:Ie,balinese:Se,persian:Te,bebop:Ke,enigmatic:Ue,ichikosucho:Le,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},He=Ht(Re,function(n){return n.split(" ")}),Je=He.keys,Qe=Jt(He," "),Ve=Object.freeze({get:Qt,names:Je,notes:Vt,intervals:Wt,isKnowScale:Xt,parse:Yt,detect:Qe}),We=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Xe=["1P 3M 5P",["Major",""]],Ye=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],Ze=["1P 3M 5P 13M",["6"]],nu=["1P 3M 5P 6M 9M",["69"]],tu=["1P 3M 5P 6M 7M 9M"],ru=["1P 3M 5d 7M"],eu=["1P 3M 6m 7M"],uu=["1P 3M 5P 7M 9m"],iu=["1P 4P 5P 7M"],ou=["1P 3M 5P 7M 9M",["maj9","Maj9"]],mu=["1P 3M 5d 7M 9M"],au=["1P 4P 5P 7M 9M"],cu=["1P 3M 5P 9M",["2","add9","add2"]],Pu=["1P 3M 5P 7M",["maj7","M7"]],Mu=["1P 3M 5d"],lu=["1P 3M 13m"],fu=["1P 2M 5P",["add9no3","sus2"]],su=["1P 4P 5P",["sus","sus4"]],du=["1P 3M 5P 9m"],pu=["1P 3m 5P",["minor"]],hu=["1P 3m 5P 7m 9M 11P",["_11"]],bu=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],vu=["1P 3m 5P 7m 9M 11P 13M",["_13"]],Au=["1P 3m 4P 5P 13M",["_6"]],gu=["1P 3m 5P 6M 9M",["_69"]],yu=["1P 3m 5P 7m",["minor7","_","_7"]],ju=["1P 3m 5P 7m 11P",["m7add4"]],xu=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],Ou=["1P 3m 5P 7m 9M",["_9"]],zu=["1P 3m 7m 12d 2M",["h9","-9b5"]],Cu=["1P 3m 5P 7M",["mM7","_M7"]],_u=["1P 3m 5P 6m 7M",["mM7b6"]],wu=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],Fu=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],qu=["1P 3m 6m 7M"],Eu=["1P 3m 6m 9m"],Gu=["1P 3m 5d",["mb5","dim"]],ku=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],Du=["1P 3m 5d 6M 7M"],Bu=["1P 3m 5d 7M"],$u=["1P 2M 4P 5P",["sus4add9"]],Nu=["1P 3m 4P 5P"],Iu=["1P 3m 5P 9M"],Su={M:Xe,M13:Ye,M6:Ze,M69:nu,M7add13:tu,M7b5:ru,M7b6:eu,M7b9:uu,M7sus4:iu,M9:ou,M9b5:mu,M9sus4:au,Madd9:cu,Maj7:Pu,Mb5:Mu,Mb6:lu,Msus2:fu,Msus4:su,addb9:du,m:pu,m11:hu,m11b5:bu,m13:vu,m6:Au,m69:gu,m7:yu,m7add11:ju,m7b5:xu,m9:Ou,m9b5:zu,mMaj7:Cu,mMaj7b6:_u,mM9:wu,mM9b6:Fu,mb6M7:qu,mb6b9:Eu,o:Gu,o7:ku,o7M7:Du,oM7:Bu,sus24:$u,madd4:Nu,madd9:Iu,4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m#5":["1P 3m 5A",["m+","mb6"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m7#5":["1P 3m 6m 7m"],"m9#5":["1P 3m 6m 7m 9M"],"+add#9":["1P 3M 5A 9A"]},Tu=Ht(Su,function(n){return n.split(" ")}),Ku=Tu.keys,Uu=Jt(Tu,""),Lu=Object.freeze({names:Ku,get:nr,notes:tr,intervals:rr,isKnownChord:er,detect:Uu,position:ur,inversion:ir,parse:ar}),Ru=Object.freeze({density:cr}),Hu=Object.freeze({notes:Pr}),Ju=Object.assign,Qu=Ju({},qr,zr,Er,Cr);return Qu.pitch=Or,Qu.notation=Pe,Qu.note=Xr,Qu.ivl=ie,Qu.midi=Nr,Qu.freq=Tr,Qu.range=ce,Qu.key=de,Qu.progression=n,Qu.sonority=Ru,Qu.pitchset=Hu,Qu.pcset=ae,Qu.scale=function(n){return Qu.scale.notes(n)},Ju(Qu.scale,Ve),Qu.chord=function(n){return Qu.chord.notes(n)},Ju(Qu.chord,Lu),"undefined"!=typeof window&&(window.Tonal=Qu),Qu});

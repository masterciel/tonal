!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("tonal-note"),require("tonal-progression")):"function"==typeof define&&define.amd?define(["tonal-note","tonal-progression"],t):n.Tonal=t(n.tonalNote,n.progression)}(this,function(n,t){"use strict";function r(n,t){return Array(t+1).join(n)}function e(n){return"number"==typeof n}function u(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function i(n,t,r){if("string"!=typeof n)return null;var e=lr.exec(n);if(!e||!t&&e[4])return null;var i={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length;var o=fr[i.step]+i.alt;return i.chroma=o<0?12+o:o%12,e[3]&&(i.oct=+e[3],i.midi=o+12*(i.oct+1),i.freq=u(i.midi,r)),t&&(i.tonicOf=e[4]),i}function o(n){return e(n)?n<0?r("b",-n):r("#",n):""}function m(n){return e(n)?""+n:""}function a(n,t,r){return null===n||void 0===n?null:n.step?a(n.step,n.alt,n.oct):n<0||n>6?null:sr.charAt(n)+o(t)+m(r)}function c(n,t){if("string"!=typeof n)return null;var r=dr.exec(n);if(!r)return null;var e={num:+(r[3]||r[8]),q:r[4]||r[6]};e.dir="-"===(r[2]||r[7])?-1:1;var u=(e.num-1)%7;return e.simple=u+1,e.type=hr[u],e.alt=M(e.type,e.q),e.oct=Math.floor((e.num-1)/7),e.size=e.dir*(pr[u]+e.alt+12*e.oct),!1!==t&&"M"===e.type&&"P"===e.q?null:e}function P(n){return hr[(n-1)%7]}function M(n,t){var r="number"==typeof n?P(n):n;return"M"===t&&"M"===r?0:"P"===t&&"P"===r?0:"m"===t&&"M"===r?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===r?-t.length:-t.length-1:null}function l(n,t){return Array(Math.abs(t)+1).join(n)}function f(n,t){var r="number"==typeof n?P(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?l("A",t):t<0?l("d","P"===r?t:t+1):null}function s(n){return"number"==typeof n}function d(n){return Math.floor(7*n/12)}function p(n,t,r){var e=br[n]+7*t;return s(r)?[e,r-vr[n]-4*t]:[e]}function h(n){var t=(n+1)%7;return t<0?7+t:t}function b(n,t){var r=Ar[h(n)],e=Math.floor((n+1)/7);return s(t)?[r,e,t+4*e+vr[r]]:[r,e]}function v(n,t,r){return r?["tnlp",[n,t],r]:["tnlp",[n,t]]}function A(n){return Array.isArray(n)&&"tnlp"===n[0]}function g(n,t,r,e){return e?["tnlp",p(n,t,r),e]:["tnlp",p(n,t,r)]}function y(n){return b.apply(null,n[1])}function j(n){return A(n)?n[2]?"ivl":"note":null}function x(n){return"note"===j(n)}function O(n){return"ivl"===j(n)}function z(n){return A(n)&&1===n[1].length}function C(n){return-1===n[2]?-1:1}function F(n){return-1===n[2]?-n[1][0]:n[1][0]}function _(n){return-1===n[2]?-n[1][1]:n[1][1]}function w(n){return 7*F(n)+12*_(n)}function q(n){var t=F(n);return 7*t-12*Math.floor(7*t/12)}function E(n){var t={};return function(r){return"string"!=typeof r?null:t[r]||(t[r]=n(r))}}function G(n){return gr(n)||yr(n)}function k(n){return x(n)?n:gr(n)}function D(n){return O(n)?n:yr(n)}function B(n){return A(n)?n:G(n)}function N(n){return x(n)?a.apply(null,y(n)):null}function $(n){if(!O(n))return null;var t=y(n),r=t[0]+1+7*t[2];return n[2]*r+f(r,t[1])}function I(n){return N(n)||$(n)}function S(n,t,r){return function(e){return function(u){if(n(u))return e(u);var i=t(u);return i?r(e(i)):null}}}function T(n,t){var r=j(t);if(!r)return null;var e=F(n)+F(t);if(z(t))return["tnlp",[e]];var u=_(n)+_(t);if("note"===r)return["tnlp",[e,u]];var i=w(n)+w(t)<0?-1:1;return["tnlp",[i*e,i*u],i]}function K(n,t){if(1===arguments.length)return function(t){return K(n,t)};var r=B(n),e=B(t),u=O(r)?T(r,e):O(e)?T(e,r):null;return n===r&&t===e?u:I(u)}function U(n,t){return arguments.length>1?U(n)(t):function(t){return K(n,v(t,0,1))}}function L(n,t){if(!n||!t||n[1].length!==t[1].length)return null;var r=F(t)-F(n);if(z(n))return v(r,-Math.floor(7*r/12),1);var e=_(t)-_(n),u=w(t)-w(n)<0?-1:1;return v(u*r,u*e,u)}function R(n,t){if(1===arguments.length)return function(t){return R(n,t)};var r=B(n),e=B(t),u=L(r,e);return n===r&&t===e?u:$(u)}function H(n,t){var r=L(B(n),B(t));return r?w(r):null}function J(n){return n||0===n}function Q(n,t){return arguments.length>1?Q(n)(t):function(t){return wr(t).map(n)}}function V(n){return wr(n).filter(J)}function W(n,t){return arguments.length>1?W(n)(t):function(t){return wr(t).filter(n)}}function X(n){if(!n)return-1/0;var t=7*F(n);return t+12*(_(n)||-Math.floor(t/12)-100)}function Y(n,t){return X(n)-X(t)}function Z(n,t){return-Y(n,t)}function nn(n,t){var r=1===arguments.length||!0===t?Y:!1===t?Z:"function"==typeof t?t:Y;return n=Array.isArray(n)?n.slice():wr(n),cn(function(n){return n.sort(r).filter(J)},n)}function tn(n){return K(v(0,n,1))}function rn(n,t){var r=wr(t),e=r.length,u=(n%e+e)%e;return r.slice(u,e).concat(r.slice(0,u))}function en(n,t){return cn(function(t){var r=t.length,e=(n%r+r)%r,u=t.slice(e,r),i=t.slice(0,e),o=H(u[r-e-1],i[0]);if(o<0){var m=Math.floor(o/12);n<0?u=u.map(tn(m)):i=i.map(tn(-m))}return u.concat(i)},t)}function un(n,t){if(1===arguments.length)return function(t){return un(n,t)};var r=wr(t);return wr(n).map(function(n){return r[n-1]||null})}function on(n){return n=wr(n),0===n.length?[[]]:on(n.slice(1)).reduce(function(t,r){return t.concat(n.map(function(t,e){var u=r.slice();return u.splice(e,0,n[0]),u}))},[])}function mn(n){return I(n)||n}function an(n){return A(n)?I(n):_r(n)?n.map(mn):n}function cn(n,t){if(1===arguments.length)return function(t){return cn(n,t)};var r=wr(t).map(B);return an(n(r))}function Pn(n){var t=wr(n);return t.length?V(t.map(R(t[0]))):t}function Mn(n){var t=[];n=wr(n);for(var r=1;r<n.length;r++)t.push(R(n[r-1],n[r]));return t}function ln(n,t){return arguments.length>1?ln(n)(t):function(t){return V(Q(K(t||"P1"),n))}}function fn(n,t){return Array(t+1).join(n)}function sn(n){return"number"==typeof n}function dn(n){return sn(n)?n<0?fn("b",-n):fn("#",n):""}function pn(n){return sn(n)?""+n:""}function hn(n,t,r){return null===n||void 0===n?null:n.step?hn(n.step,n.alt,n.oct):n<0||n>6?null:kr.charAt(n)+dn(t)+pn(r)}function bn(n){return"number"==typeof n}function vn(n){return"string"==typeof n}function An(n){return void 0!==n}function gn(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function yn(n,t,r){if("string"!=typeof n)return null;var e=Dr.exec(n);if(!e||!t&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,"##")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt="b"===u.acc[0]?-u.acc.length:u.acc.length;var i=Br[u.step]+u.alt;return u.chroma=i<0?12+i:i%12,e[3]&&(u.oct=+e[3],u.midi=i+12*(u.oct+1),u.freq=gn(u.midi,r)),t&&(u.tonicOf=e[4]),u}function jn(n){if((bn(n)||vn(n))&&n>=0&&n<128)return+n;var t=yn(n);return t&&An(t.midi)?t.midi:null}function xn(n){return Array.isArray(n)&&2===n.length?7*n[0]+12*n[1]+12:jn(n)}function On(n,t){return!0===n||!1===n?function(t){return On(t,n)}:(n=Math.round(n),(!0===t?$r:Nr)[n%12]+(Math.floor(n/12)-1))}function zn(n){var t=k(n);return t?q(t):null}function Cn(n){var t=k(n);return t?N(t):null}function Fn(n){var t=k(n);if(!t)return null;var r=y(t);return{step:r[0],alt:r[1],oct:r[2]}}function _n(n){return n?hn(n.step,n.alt,n.oct):null}function wn(n){return function(t){var r=Fn(t);return r?r[n]:null}}function qn(n){var t=k(n);return t?F(t):null}function En(n){var t=k(n);return t?N([t[0],[F(t)]]):null}function Gn(n){var t=[];return t.push(K(Qr,n)),null===t[0]?null:(t.push(n),t.push(K(Jr,n)),t)}function kn(n){return Gn(n).reduce(function(n,t){return n?n.length>t.length?t:n:t},null)}function Dn(n){return Wr[(n-1)%7]}function Bn(n){return-1===n?"-":""}function Nn(n,t){return n+7*t}function $n(n,t,r,e){return Bn(e)+Nn(n,r)+Sn(n,t)}function In(n,t){return Array(Math.abs(t)+1).join(n)}function Sn(n,t){var r="number"==typeof n?Dn(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?In("A",t):t<0?In("d","P"===r?t:t+1):null}function Tn(n){var t=D(n);return t?$(t):null}function Kn(n){var t=Ln(n);return t?t.num:null}function Un(n){var t=Ln(n);return t?t.num*t.dir:null}function Ln(n){var t=D(n);if(!t)return null;var r=y(t);return{num:r[0]+1+7*r[2],alt:r[1],dir:t[2]}}function Rn(n){if(!n||n.num<1)return null;var t=Math.floor(n.num/8);return $n(n.num-7*t,n.alt||0,t,n.dir)}function Hn(n){var t=D(n);return t?w(t):null}function Jn(n){var t=n<0?-1:1,r=Math.abs(n),e=r%12,u=Math.floor(r/12);return t*(Xr[e]+7*u)+Yr[e]}function Qn(n){var t=D(n),r=t?q(t):Math.round(n);return isNaN(r)?null:Zr[Math.abs(r)%12]}function Vn(n){var t=D(n);return t?ne[y(t)[0]]:null}function Wn(n,t){return n=!(!n&&0!==n)&&Math.pow(10,n),function(r){return r=t(r),null===r?null:n?Math.round(r*n)/n:r}}function Xn(n,t,r){return arguments.length>2?Xn(n,t)(r):Wn(t,function(t){var r=xn(t);return r?Math.pow(2,(r-69)/12)*n:null})}function Yn(n,t,r){return arguments.length>2?Yn(n,t)(r):Wn(t,function(t){return 12*(Math.log(t)-Math.log(n))/Math.log(2)+69})}function Zn(n,t){return On(ie(n),t)}function nt(n,t){var r=ue(n)||n,e=ue(t)||t;return Math.round(Math.log(e/r)/Math.log(2)*1200)}function tt(n){return parseInt(et(n),2)}function rt(n){return n=B(n),n?q(n):null}function et(n){if(ot(n))return n;var t=[0,0,0,0,0,0,0,0,0,0,0,0];return Q(rt,n).forEach(function(n){t[n]=1}),t.join("")}function ut(n){var t=Q(En,n);if(!t.length)return t;var r=t[0];return mt(rn(rt(r),et(t).split("")).join(""),r)}function it(n,t){t=!1!==t;var r=et(n).split("");return V(r.map(function(n,e){var u=rn(e,r);return t&&"0"===u[0]?null:u.join("")}))}function ot(n){return me.test(n)}function mt(n,t){return 1===arguments.length?function(t){return mt(n,t)}:ot(n)?(t=t||"P1",V(n.split("").map(function(n,r){return"1"===n?K(ae[r],t):null}))):null}function at(n,t){return 1===arguments.length?function(t){return at(n,t)}:et(n)===et(t)}function ct(n,t){return 1===arguments.length?function(t){return ct(n,t)}:((t=tt(t))&tt(n))===t}function Pt(n,t){return 1===arguments.length?function(t){return Pt(n,t)}:((t=tt(t))|tt(n))===t}function Mt(n,t){return arguments.length>1?Mt(n)(t):(n=et(n),function(t){return"1"===n[rt(t)]})}function lt(n,t){return 1===arguments.length?function(t){return lt(n,t)}:wr(t).filter(Mt(n))}function ft(n){return"number"==typeof n}function st(n){return ft(n)?n:xn(n)}function dt(n,t){for(var r=[];t--;r[t]=t+n);return r}function pt(n,t){for(var r=[];t--;r[t]=n-t);return r}function ht(n,t){return null===n||null===t?[]:n<t?dt(n,t-n+1):pt(n,n-t+1)}function bt(n){return wr(n).map(st).reduce(function(n,t,r){if(1===r)return ht(n,t);var e=n[n.length-1];return n.concat(ht(e,t).slice(1))})}function vt(n,t){return Q(On(!0===t),bt(n))}function At(n,t){return bt(t).map(U(n))}function gt(n,t){return 1===arguments.length?function(t){return gt(n,t)}:lt(n,vt(t))}function yt(n){var t="CDEFGAB".indexOf(n.toUpperCase());return t<0?null:t}function jt(n){return!(n<0||n>6)}function xt(n){return jt(n)?"CDEFGAB".charAt(n):null}function Ot(n){return/^b+$/.test(n)}function zt(n){return/^#+$/.test(n)}function Ct(n){return""===n?0:Ot(n)?-n.length:zt(n)?n.length:null}function Ft(n,t){return Array(t+1).join(n)}function _t(n){return n?n<0?Ft("b",-n):Ft("#",n):""}function wt(n,t){return n?n+" "+t:t}function qt(n){return wt(U("C",n),"major")}function Et(n){return fe[le.indexOf(n)]}function Gt(n){return n=n.trim().toLowerCase(),-1===le.indexOf(n)?null:n}function kt(n){if("string"!=typeof n)return null;var t,r=n.indexOf(" ");if(-1===r){var e=En(n);t=e?{tonic:e,mode:"major"}:{tonic:!1,mode:Gt(n)}}else t={tonic:En(n.slice(0,r)),mode:Gt(n.slice(r+1))};return t.mode?t:null}function Dt(n){return null!==kt(n)}function Bt(n){return(kt(n)||n||{}).tonic||null}function Nt(n){return(kt(n)||n||{}).mode||null}function $t(n,t){return 1===arguments.length?function(t){return $t(n,t)}:!(n=kt(n))||n.tonic?null:(t=kt(t))&&t.tonic?wt(U(t.tonic,Et(n.mode)-Et(t.mode)),n.mode):null}function It(n){var t=Lt(n);return null===t?null:t<0?bt([-1,t]).map(U("F")):bt([1,t]).map(U("B"))}function St(n){return n?le.slice():le.slice(0,-2)}function Tt(n){return"number"==typeof n?qt(n):null}function Kt(n){return zt(n)?qt(n.length):Ot(n)?qt(-n.length):null}function Ut(n){var t=kt(n);return t&&t.tonic?ln(se[le.indexOf(t.mode)],t.tonic):null}function Lt(n){var t=kt(n);if(!t||!t.tonic)return null;var r=Et(t.mode);return qn(t.tonic)-r}function Rt(n){return _t(Lt(n))}function Ht(n){return n}function Jt(n,t){t=t||Ht;var r={},e=Object.keys(n),u=[];return e.forEach(function(e){var i=t(n[e][0]);r[e]=i,n[e][1]&&n[e][1].forEach(function(n){r[n]=i,u.push(n)})}),{get:function(n){return r[n]},keys:function(n,t){var i=n?e.concat(u):e.slice();return"function"!=typeof t?i:i.filter(function(n){return t(n,r[n])})}}}function Qt(n,t){var r="string"==typeof t,e="function"==typeof t,u=n.keys(!1).reduce(function(t,r){return t[et(n.get(r))]=r,t},{});return function(n){return n=nn(Q(En,n)),V(it(n).map(function(i,o){var m=u[i];if(!m)return null;var a=n[o];return r?a+t+m:e?t(m,a):[m,a]}))}}function Vt(n,t){if(1===arguments.length)return function(t){return Vt(n,t)};var r=Je.get(n);return r?ln(r,t):null}function Wt(n){var t=Zt(n);return(t.tonic?Vt(t.type,En(t.tonic)):null)||V(Q(En,n).map(function(n,t,r){return r.indexOf(n)<t?null:n}))}function Xt(n){return Vt(Zt(n).type,!1)||[]}function Yt(n){return Xt(n).length>0}function Zt(n){if("string"!=typeof n)return null;var t=n.indexOf(" "),r=Cn(n.substring(0,t))||!1;return{tonic:r,type:r?n.substring(t+1):n}}function nr(){return Xe}function tr(n,t){if(1===arguments.length)return function(t){return tr(n,t)};var r=Ku.get(n);return r?ln(r,t):null}function rr(n){var t=cr(n),r=Ku.get(t.type);return r?ln(r,t.tonic):V(Q(Cn,n))}function er(n){var t=cr(n);return Ku.get(t.type)||[]}function ur(n){return er(n).length>0}function ir(n){var t=Q(En,n),r=mr(t);return r?r.indexOf(t[0]):null}function or(n,t){if(1===arguments.length)return function(t){return or(n,t)};var r=mr(t);return r?rn(n,r):[]}function mr(n){for(var t=on(rr(n).map(En)),r=0;r<t.length;r++){if(ar(Mn(t[r])))return t[r]}return null}function ar(n){for(var t=0;t<n.length;t++)if("3"!==n[t][0])return!1;return!0}function cr(n){var t=nr().exec(n);return t?t[4]?"7"===t[3]||"6"===t[3]?{type:t[3]+t[4],tonic:t[1]+t[2]}:{type:t[4],tonic:t[1]+t[2]+t[3]}:{type:t[3],tonic:t[1]+t[2]}:{type:n,tonic:!1}}function Pr(n){var t,r,e,u=V(Q(k,n)),i=u.length,o=[0,0,0,0,0,0];for(t=0;t<i;t++)for(r=t;r<i;r++)e=Qn(q(u[r])-q(u[t])),6===e?o[5]=o[5]+1:e>0&&(o[5-e]=o[5-e]+1);return o}function Mr(n){return nn(n).filter(function(n,t,r){return 0===t||n!==r[t-1]})}var lr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,fr=[0,2,4,5,7,9,11],sr="CDEFGAB",dr=new RegExp("^(?:(([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4}))|((AA|A|P|M|m|d|dd)([-+]?)(\\d+)))$"),pr=[0,2,4,5,7,9,11],hr="PMMPPMM",br=[0,2,4,-1,1,3,5],vr=br.map(d),Ar=[3,0,4,1,5,2,6],gr=E(function(n){var t=i(n);return t?g(t.step,t.alt,t.oct):null}),yr=E(function(n){var t=c(n);return t&&t?g(t.simple-1,t.alt,t.oct,t.dir):null}),jr=S(x,gr,N),xr=S(O,yr,$),Or=S(A,G,I),zr=Object.freeze({pitch:v,isPitch:A,encode:g,decode:y,pType:j,isNotePitch:x,isIvlPitch:O,isPC:z,dir:C,fifths:F,focts:_,height:w,chr:q,parseNote:gr,parseIvl:yr,parsePitch:G,asNotePitch:k,asIvlPitch:D,asPitch:B,strNote:N,strIvl:$,strPitch:I,noteFn:jr,ivlFn:xr,pitchFn:Or}),Cr=Object.freeze({transpose:K,trFifths:U}),Fr=Object.freeze({interval:R,semitones:H}),_r=Array.isArray,wr=function(n){return function(t){return void 0===t?[]:Array.isArray(t)?t:"string"==typeof t?t.trim().split(n):[t]}}(/\s*\|\s*|\s*,\s*|\s+/),qr=cn(function(n){for(var t,r,e=n.length;e;)t=Math.random()*e--|0,r=n[e],n[e]=n[t],n[t]=r;return n}),Er=Object.freeze({asArr:wr,map:Q,compact:V,filter:W,sort:nn,shuffle:qr,rotate:rn,rotateAsc:en,select:un,permutations:on}),Gr=Object.freeze({harmonics:Pn,intervallic:Mn,harmonize:ln}),kr="CDEFGAB",Dr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Br=[0,2,4,5,7,9,11],Nr="C Db D Eb E F Gb G Ab A Bb B".split(" "),$r="C C# D D# E F F# G G# A A# B".split(" "),Ir=Object.freeze({toMidi:xn,note:On}),Sr=xn,Tr=On,Kr=n.toFreq,Ur=Cn,Lr=wn("oct"),Rr=wn("step"),Hr=wn("alt"),Jr=yr("2d"),Qr=yr("-2d"),Vr=Object.freeze({midi:Sr,fromMidi:Tr,freq:Kr,chroma:zn,note:Cn,name:Ur,props:Fn,fromProps:_n,oct:Lr,step:Rr,pcFifths:qn,alt:Hr,pc:En,enharmonics:Gn,simplify:kn}),Wr="PMMPPMM",Xr=[1,2,2,3,3,4,5,5,6,6,7,7],Yr="P m M m M P d P m M m M".split(" "),Zr=[0,1,2,3,4,5,6,5,4,3,2,1],ne="PMMPPMM",te=xr(function(n){var t=y(n);return g((7-t[0])%7,"P"===ne[t[0]]?-t[1]:-(t[1]+1),t[2],C(n))}),re=xr(function(n){var t=y(n);return 0===t[0]&&1===t[2]||(t[2]=0),g(t[0],t[1],t[2],C(n))}),ee=Object.freeze({toInterval:Tn,num:Kn,value:Un,props:Ln,fromProps:Rn,semitones:Hn,fromSemitones:Jn,ic:Qn,type:Vn,invert:te,simplify:re}),ue=Xn(440,2),ie=Yn(440,2),oe=Object.freeze({eqTempFreq:Xn,toFreq:ue,eqTempFreqToMidi:Yn,toMidi:ie,note:Zn,cents:nt}),me=/^[01]{12}$/,ae="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" "),ce=Object.freeze({chroma:et,notes:ut,chromaModes:it,isChroma:ot,fromChroma:mt,equal:at,subset:ct,superset:Pt,includes:Mt,filter:lt}),Pe=Object.freeze({numeric:bt,chromatic:vt,fifths:At,pitchSet:gt}),Me=Object.freeze({toStep:yt,isStep:jt,toLetter:xt,areFlats:Ot,areSharps:zt,toAlt:Ct,toAcc:_t}),le=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian","major","minor"],fe=[0,2,4,-1,1,3,5,0,3],se=[0,1,2,3,4,5,6,0,5].map(function(n){return Pn(rn(n,["C","D","E","F","G","A","B"]))}),de=Rt,pe=Object.freeze({props:kt,isKeyName:Dt,tonic:Bt,mode:Nt,relative:$t,alteredNotes:It,modes:St,fromAlter:Tt,fromAcc:Kt,scale:Ut,alteration:Lt,signature:Rt,accidentals:de}),he=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],be=["1P 2M 3M 4A 5P 6M 7M"],ve=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],Ae=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],ge=["1P 2M 3m 4P 5P 6M 7m"],ye=["1P 2M 3m 4P 5P 6m 7m",["minor"]],je=["1P 2m 3m 4P 5P 6m 7m"],xe=["1P 2m 3m 4P 5d 6m 7m"],Oe=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],ze=["1P 2m 4P 5d 7m"],Ce=["1P 2M 3m 5P 6m"],Fe=["1P 2m 4P 5P 6m"],_e=["1P 2m 3m 5P 6m"],we=["1P 2M 3M 4A 6M 7m"],qe=["1P 2M 4P 5P 6M"],Ee=["1P 2m 3M 5P 6M"],Ge=["1P 2M 4P 5P 6M 7m"],ke=["1P 2A 3M 5P 5A 7M"],De=["1P 2m 3m 4P 5P 6m 7M"],Be=["1P 2M 3m 4P 5d 6m 6M 7M"],Ne=["1P 2M 4P 5P 7m"],$e=["1P 2m 3M 4P 5d 6M 7m"],Ie=["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],Se=["1P 2m 3m 3M 4A 5P 7m"],Te=["1P 2m 3m 4P 5P 6m 7M"],Ke=["1P 2m 3M 4P 5d 6m 7M"],Ue=["1P 2M 3M 4P 5P 6M 7m 7M"],Le=["1P 2m 3M 5d 6m 7m 7M"],Re=["1P 2M 3M 4P 5d 5P 6M 7M"],He={chromatic:he,lydian:be,major:ve,mixolydian:Ae,dorian:ge,aeolian:ye,phrygian:je,locrian:xe,altered:Oe,iwato:ze,hirajoshi:Ce,kumoijoshi:Fe,pelog:_e,prometheus:we,ritusen:qe,scriabin:Ee,piongio:Ge,augmented:ke,neopolitan:De,diminished:Be,egyptian:Ne,oriental:$e,spanish:Ie,flamenco:Se,balinese:Te,persian:Ke,bebop:Ue,enigmatic:Le,ichikosucho:Re,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},Je=Jt(He,function(n){return n.split(" ")}),Qe=Je.keys,Ve=Qt(Je," "),We=Object.freeze({get:Vt,names:Qe,notes:Wt,intervals:Xt,isKnowScale:Yt,parse:Zt,detect:Ve}),Xe=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Ye=["1P 3M 5P",["Major",""]],Ze=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],nu=["1P 3M 5P 13M",["6"]],tu=["1P 3M 5P 6M 9M",["69"]],ru=["1P 3M 5P 6M 7M 9M"],eu=["1P 3M 5d 7M"],uu=["1P 3M 6m 7M"],iu=["1P 3M 5P 7M 9m"],ou=["1P 4P 5P 7M"],mu=["1P 3M 5P 7M 9M",["maj9","Maj9"]],au=["1P 3M 5d 7M 9M"],cu=["1P 4P 5P 7M 9M"],Pu=["1P 3M 5P 9M",["2","add9","add2"]],Mu=["1P 3M 5P 7M",["maj7","M7"]],lu=["1P 3M 5d"],fu=["1P 3M 13m"],su=["1P 2M 5P",["add9no3","sus2"]],du=["1P 4P 5P",["sus","sus4"]],pu=["1P 3M 5P 9m"],hu=["1P 3m 5P",["minor"]],bu=["1P 3m 5P 7m 9M 11P",["_11"]],vu=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],Au=["1P 3m 5P 7m 9M 11P 13M",["_13"]],gu=["1P 3m 4P 5P 13M",["_6"]],yu=["1P 3m 5P 6M 9M",["_69"]],ju=["1P 3m 5P 7m",["minor7","_","_7"]],xu=["1P 3m 5P 7m 11P",["m7add4"]],Ou=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],zu=["1P 3m 5P 7m 9M",["_9"]],Cu=["1P 3m 7m 12d 2M",["h9","-9b5"]],Fu=["1P 3m 5P 7M",["mM7","_M7"]],_u=["1P 3m 5P 6m 7M",["mM7b6"]],wu=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],qu=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],Eu=["1P 3m 6m 7M"],Gu=["1P 3m 6m 9m"],ku=["1P 3m 5d",["mb5","dim"]],Du=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],Bu=["1P 3m 5d 6M 7M"],Nu=["1P 3m 5d 7M"],$u=["1P 2M 4P 5P",["sus4add9"]],Iu=["1P 3m 4P 5P"],Su=["1P 3m 5P 9M"],Tu={M:Ye,M13:Ze,M6:nu,M69:tu,M7add13:ru,M7b5:eu,M7b6:uu,M7b9:iu,M7sus4:ou,M9:mu,M9b5:au,M9sus4:cu,Madd9:Pu,Maj7:Mu,Mb5:lu,Mb6:fu,Msus2:su,Msus4:du,addb9:pu,m:hu,m11:bu,m11b5:vu,m13:Au,m6:gu,m69:yu,m7:ju,m7add11:xu,m7b5:Ou,m9:zu,m9b5:Cu,mMaj7:Fu,mMaj7b6:_u,mM9:wu,mM9b6:qu,mb6M7:Eu,mb6b9:Gu,o:ku,o7:Du,o7M7:Bu,oM7:Nu,sus24:$u,madd4:Iu,madd9:Su,4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m#5":["1P 3m 5A",["m+","mb6"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m7#5":["1P 3m 6m 7m"],"m9#5":["1P 3m 6m 7m 9M"],"+add#9":["1P 3M 5A 9A"]},Ku=Jt(Tu,function(n){return n.split(" ")}),Uu=Ku.keys,Lu=Qt(Ku,""),Ru=Object.freeze({names:Uu,get:tr,notes:rr,intervals:er,isKnownChord:ur,detect:Lu,position:ir,inversion:or,parse:cr}),Hu=Object.freeze({density:Pr}),Ju=Object.freeze({notes:Mr}),Qu=Object.assign,Vu=Qu({},Er,Cr,Gr,Fr);return Vu.pitch=zr,Vu.notation=Me,Vu.note=Vr,Vu.ivl=ee,Vu.midi=Ir,Vu.freq=oe,Vu.range=Pe,Vu.key=pe,Vu.progression=t,Vu.sonority=Hu,Vu.pitchset=Ju,Vu.pcset=ce,Vu.scale=function(n){return Vu.scale.notes(n)},Qu(Vu.scale,We),Vu.chord=function(n){return Vu.chord.notes(n)},Qu(Vu.chord,Ru),"undefined"!=typeof window&&(window.Tonal=Vu),Vu});

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){function T(){}T.notation=require("array-notation");T.note=T.notation.note;T.interval=T.notation.interval;T.roman=T.notation.roman;T.pitch=T.notation.pitch;T.transpose=require("note-transpose");T.note.transpose=T.transpose;T.note.interval=require("note-interval");T.midi=T.note.midi=require("note-midi");T.midi.freq=require("midi-freq");T.gamut=require("music-gamut");T.harmonizer=T.gamut.harmonizer;module.exports=T},{"array-notation":2,"midi-freq":20,"music-gamut":21,"note-interval":22,"note-midi":23,"note-transpose":24}],2:[function(require,module,exports){"use strict";var N={};N.operation=require("./operation");N.note=require("./note/note");N.note.regex=require("./note/regex");N.note.parse=require("./note/parse");N.note.str=require("./note/str");N.interval=require("./interval/interval");N.interval.regex=require("./interval/regex");N.interval.parse=require("./interval/parse");N.interval.str=require("./interval/str");N.pitch=require("./pitch/pitch");N.pitch.parse=require("./pitch/parse");N.pitch.str=require("./pitch/str");N.roman={};N.roman.regex=require("./roman/regex");N.roman.parse=require("./roman/parse");N.memoize=require("./lib/memoize");N.propsToArray=require("./lib/props-to-arr");N.arrayToProps=require("./lib/array-props");module.exports=N},{"./interval/interval":3,"./interval/parse":4,"./interval/regex":5,"./interval/str":6,"./lib/array-props":7,"./lib/memoize":8,"./lib/props-to-arr":9,"./note/note":10,"./note/parse":11,"./note/regex":12,"./note/str":13,"./operation":14,"./pitch/parse":15,"./pitch/pitch":16,"./pitch/str":17,"./roman/parse":18,"./roman/regex":19}],3:[function(require,module,exports){"use strict";var parse=require("./parse");var str=require("./str");module.exports=function(n){return str(parse(n))}},{"./parse":4,"./str":6}],4:[function(require,module,exports){"use strict";var memoize=require("../lib/memoize");var ptc=require("../lib/props-to-arr");var INTERVAL=require("./regex");var TYPES="PMMPPMM";var QALT={P:{dddd:-4,ddd:-3,dd:-2,d:-1,P:0,A:1,AA:2,AAA:3,AAAA:4},M:{ddd:-4,dd:-3,d:-2,m:-1,M:0,A:1,AA:2,AAA:3,AAAA:4}};module.exports=memoize(function(str){var m=INTERVAL.exec(str);if(!m)return null;var dir=(m[2]||m[7])==="-"?-1:1;var num=+(m[3]||m[8])-1;var q=m[4]||m[6]||"";var simple=num%7;var alt;if(q==="")alt=0;else if(q[0]==="#")alt=q.length;else if(q[0]==="b")alt=-q.length;else{alt=QALT[TYPES[simple]][q];if(typeof alt==="undefined")return null}var oct=Math.floor(num/7);return ptc([simple,alt,oct,dir])})},{"../lib/memoize":8,"../lib/props-to-arr":9,"./regex":5}],5:[function(require,module,exports){var TONAL="([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4}|b{1,4}|#{1,4}|)";var STRICT="(AA|A|P|M|m|d|dd)([-+]?)(\\d+)";var COMPOSE="(?:("+TONAL+")|("+STRICT+"))";module.exports=new RegExp("^"+COMPOSE+"$")},{}],6:[function(require,module,exports){"use strict";var props=require("../lib/array-props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length!==2)return null;var str="|"+arr[0]+"|"+arr[1];return str in cache?cache[str]:cache[str]=build(arr)};var ALTER={P:["dddd","ddd","dd","d","P","A","AA","AAA","AAAA"],M:["ddd","dd","d","m","M","A","AA","AAA","AAAA"]};var TYPES="PMMPPMM";function build(coord){var p=props(coord);var t=TYPES[p[0]];var dir,num,alt;if(p[2]<0){dir=-1;num=8-p[0]-7*(p[2]+1);alt=t==="P"?-p[1]:-(p[1]+1)}else{dir=1;num=p[0]+1+7*p[2];alt=p[1]}var q=ALTER[t][4+alt];return dir*num+q}},{"../lib/array-props":7}],7:[function(require,module,exports){"use strict";var BASES=[[3,1],[0,0],[4,0],[1,-1],[5,-1],[2,-2],[6,-2],[3,-3]];module.exports=function(arr){if(!Array.isArray(arr))return null;var index=(arr[0]+1)%7;if(index<0)index=7+index;var base=BASES[index];var alter=Math.floor((arr[0]+1)/7);var oct=arr.length===1?null:arr[1]-base[1]+alter*4;var dur=arr[2]||null;return[base[0],alter,oct,dur]}},{}],8:[function(require,module,exports){"use strict";module.exports=function(fn){var cache={};return function(str){if(typeof str!=="string")return null;return str in cache?cache[str]:cache[str]=fn(str)}}},{}],9:[function(require,module,exports){"use strict";var BASES=[[0,0],[2,-1],[4,-2],[-1,1],[1,0],[3,-1],[5,-2]];module.exports=function(p){var base=BASES[p[0]];if(p.length===2)return[base[0]+7*p[1]];return[p[3]*(base[0]+7*p[1]),p[3]*(p[2]+base[1]-4*p[1])]}},{}],10:[function(require,module,exports){"use strict";var parse=require("./parse");var str=require("./str");module.exports=function(n){return str(parse(n))}},{"./parse":11,"./str":13}],11:[function(require,module,exports){"use strict";var memoize=require("../lib/memoize");var R=require("./regex");var BASES={C:[0,0],D:[2,-1],E:[4,-2],F:[-1,1],G:[1,0],A:[3,-1],B:[5,-2]};module.exports=memoize(function(str){var m=R.exec(str);if(!m||m[5])return null;var base=BASES[m[1].toUpperCase()];var alt=m[2].replace(/x/g,"##").length;if(m[2][0]==="b")alt*=-1;var fifths=base[0]+7*alt;if(!m[3])return[fifths];var oct=+m[3]+base[1]-4*alt;var dur=m[4]?+m[4].substring(1):null;return[fifths,oct,dur]})},{"../lib/memoize":8,"./regex":12}],12:[function(require,module,exports){"use strict";module.exports=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)(\/\d+|)\s*(.*)\s*$/},{}],13:[function(require,module,exports){"use strict";var props=require("../lib/array-props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length<1||arr.length===2)return null;var str="|"+arr[0]+"|"+arr[1]+"|"+arr[2];return str in cache?cache[str]:cache[str]=build(arr)};function accidentals(num){if(num<0)return Array(-num+1).join("b");else if(num>0)return Array(num+1).join("#");else return""}var LETTER=["C","D","E","F","G","A","B"];function build(coord){var p=props(coord);return LETTER[p[0]]+accidentals(p[1])+(p[2]!==null?p[2]:"")+(p[3]!==null?"/"+p[3]:"")}},{"../lib/array-props":7}],14:[function(require,module,exports){"use strict";function curry(fn,arity){if(arity===1)return fn;return function(a,b){if(arguments.length===1)return function(c){return fn(a,c)};return fn(a,b)}}module.exports=function op(parse,str,fn){if(arguments.length===2)return function(f){return op(parse,str,f)};return curry(function(a,b){var ac=parse(a);var bc=parse(b);if(!ac&&!bc)return fn(a,b);var v=fn(ac||a,bc||b);return str(v)||v},fn.length)}},{}],15:[function(require,module,exports){var note=require("../note/parse");var interval=require("../interval/parse");module.exports=function(n){return note(n)||interval(n)}},{"../interval/parse":4,"../note/parse":11}],16:[function(require,module,exports){"use strict";var str=require("./str");var parse=require("./parse");module.exports=function(s){return str(parse(s))}},{"./parse":15,"./str":17}],17:[function(require,module,exports){var note=require("../note/str");var interval=require("../interval/str");module.exports=function(n){return note(n)||interval(n)}},{"../interval/str":6,"../note/str":13}],18:[function(require,module,exports){"use strict";var memoize=require("../lib/memoize");var R=require("./regex");var coord=require("../lib/props-to-arr");var NUM={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6};module.exports=memoize(function(str){var m=R.exec(str);if(!m||m[3])return null;var num=NUM[m[2].toLowerCase()];var alt=m[1].length;if(m[1][0]==="b")alt=-alt;return coord([num,alt])})},{"../lib/memoize":8,"../lib/props-to-arr":9,"./regex":19}],19:[function(require,module,exports){"use strict";module.exports=/^\s*(b|bb|#|##|)(IV|III|II|I|VII|VI|V|iv|iii|ii|i|vii|vi|v)\s*(.*)\s*$/},{}],20:[function(require,module,exports){module.exports=function freq(tuning,midi){tuning=tuning||440;if(arguments.length>1)return freq(tuning)(midi);return function(m){return m>0&&m<128?Math.pow(2,(m-69)/12)*tuning:null}}},{}],21:[function(require,module,exports){"use strict";var parse=require("array-notation/pitch/parse");var str=require("array-notation/pitch/str");var distanceTo=require("note-interval");var transpose=require("note-transpose");var SEP=/\s*\|\s*|\s*,\s*|\s+/;var toStr=function(s){return Array.isArray(s)?str(s):s};function simplify(p){return p.length===2?[p[0],-Math.floor(p[0]*7/12)]:[p[0]]}function equal(a,b){return a[0]===b[0]&&a[1]===b[1]}function height(p){if(!p)return-Infinity;var f=p[0]*7;var o=p[1]||p[1]===0?p[1]:-Math.floor(f/12)-10;return f+o*12}function gamut(source,op){if(op===false)return gamut.harmonizer(source,false);if(typeof op==="function")return gamut.operation(op)(source);var g=gamut.split(source);return g.map(function(e){return str(parse(e))})}gamut.split=function(source){if(Array.isArray(source))return source;else if(typeof source==="string")return source.trim().split(SEP);else if(source===null||typeof source==="undefined")return[];else return[source]};gamut.operation=function(fn){return function(source){var g=gamut.split(source);if(Array.isArray(g[0]))return fn(g);var v=fn(g.map(parse));return Array.isArray(v)?v.map(toStr):v}};gamut.harmonizer=function(source,tonic){if(arguments.length===1)return function(t){return gamut.harmonizer(source,t)};return gamut.operation(function(g){var base=g[0];var intervals=g.map(distanceTo(base));if(tonic===false)return intervals;tonic=parse(tonic);return intervals.map(transpose(tonic))})(source)};gamut.rotate=function(count,source){var g=gamut.split(source);var len=g.length;var n=(count%len+len)%len;return g.slice(n,len).concat(g.slice(0,n))};gamut.sort=gamut.operation(function(g){return g.sort(function(a,b){return height(a)-height(b)})});gamut.select=function s(nums,src){if(arguments.length===1)return function(g){return s(nums,g)};var g=gamut.split(src);return gamut.split(nums).map(function(n){return g[n-1]})};gamut.set=gamut.operation(function(notes){var sorted=gamut.sort(notes.map(simplify));return sorted.reduce(function(uniq,value,index){if(index===0||!equal(sorted[index-1],value))uniq.push(value);return uniq},[])});if(typeof module==="object"&&module.exports)module.exports=gamut;if(typeof window!=="undefined")window.gamut=gamut},{"array-notation/pitch/parse":15,"array-notation/pitch/str":17,"note-interval":22,"note-transpose":24}],22:[function(require,module,exports){var parse=require("array-notation/pitch/parse");var str=require("array-notation/pitch/str");var notation=require("array-notation/operation")(parse,str);module.exports=notation(function(a,b){if(!Array.isArray(a)||!Array.isArray(b))return null;if(a.length===1||b.length===1){var base=b[0]-a[0];return[base,-Math.floor(base*7/12)]}return[b[0]-a[0],b[1]-a[1]]})},{"array-notation/operation":14,"array-notation/pitch/parse":15,"array-notation/pitch/str":17}],23:[function(require,module,exports){"use strict";var parse=require("array-notation/note/parse");function midi(note){if((typeof note==="number"||typeof note==="string")&&note>0&&note<128)return+note;var p=Array.isArray(note)?note:parse(note);if(!p||p.length<2)return null;return p[0]*7+p[1]*12+12}if(typeof module==="object"&&module.exports)module.exports=midi;if(typeof window!=="undefined")window.midi=midi},{"array-notation/note/parse":11}],24:[function(require,module,exports){var parse=require("array-notation/pitch/parse");var str=require("array-notation/pitch/str");var operation=require("array-notation/operation")(parse,str);var transpose=operation(function(i,n){if(i===false)return n;else if(!Array.isArray(i)||!Array.isArray(n))return null;else if(i.length===1||n.length===1)return[n[0]+i[0]];var d=i.length===2&&n.length===2?null:n[2]||i[2];return[n[0]+i[0],n[1]+i[1],d]});if(typeof module==="object"&&module.exports)module.exports=transpose;if(typeof window!=="undefined")window.transpose=transpose},{"array-notation/operation":14,"array-notation/pitch/parse":15,"array-notation/pitch/str":17}]},{},[1]);
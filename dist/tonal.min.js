!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Tonal=t()}(this,function(){"use strict";function n(n,t){return Array(t+1).join(n)}function t(n){return"number"==typeof n}function r(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function e(n,t,e){if("string"!=typeof n)return null;var u=Vt.exec(n);if(!u||!t&&u[4])return null;var o={letter:u[1].toUpperCase(),acc:u[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var i=Tt[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,u[3]&&(o.oct=+u[3],o.midi=i+12*(o.oct+1),o.freq=r(o.midi,e)),t&&(o.tonicOf=u[4]),o}function u(r){return t(r)?r<0?n("b",-r):n("#",r):""}function o(n){return t(n)?""+n:""}function i(n,t,r){return null===n||void 0===n?null:n.step?i(n.step,n.alt,n.oct):n<0||n>6?null:Rt.charAt(n)+u(t)+o(r)}function c(n,t){if("string"!=typeof n)return null;var r=Kt.exec(n);if(!r)return null;var e={num:+(r[3]||r[8]),q:r[4]||r[6]};e.dir="-"===(r[2]||r[7])?-1:1;var u=(e.num-1)%7;return e.simple=u+1,e.type=Ht[u],e.alt=m(e.type,e.q),e.oct=Math.floor((e.num-1)/7),e.size=e.dir*(Lt[u]+e.alt+12*e.oct),!1!==t&&"M"===e.type&&"P"===e.q?null:e}function a(n){return Ht[(n-1)%7]}function m(n,t){var r="number"==typeof n?a(n):n;return"M"===t&&"M"===r?0:"P"===t&&"P"===r?0:"m"===t&&"M"===r?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===r?-t.length:-t.length-1:null}function l(n,t){return Array(Math.abs(t)+1).join(n)}function P(n,t){var r="number"==typeof n?a(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?l("A",t):t<0?l("d","P"===r?t:t+1):null}function M(n){return"number"==typeof n}function f(n,t,r){var e=Jt[n]+7*t;return M(r)?[e,r-Qt[n]-4*t]:[e]}function s(n){var t=(n+1)%7;return t<0?7+t:t}function p(n,t){var r=Wt[s(n)],e=Math.floor((n+1)/7);return M(t)?[r,e,t+4*e+Qt[r]]:[r,e]}function d(n,t,r){return r?["tnlp",[n,t],r]:["tnlp",[n,t]]}function h(n){return Array.isArray(n)&&"tnlp"===n[0]}function b(n,t,r,e){return e?["tnlp",f(n,t,r),e]:["tnlp",f(n,t,r)]}function v(n){return p.apply(null,n[1])}function g(n){return h(n)?n[2]?"ivl":"note":null}function A(n){return"note"===g(n)}function y(n){return"ivl"===g(n)}function j(n){return h(n)&&1===n[1].length}function x(n){return-1===n[2]?-1:1}function w(n){return-1===n[2]?-n[1][0]:n[1][0]}function O(n){return-1===n[2]?-n[1][1]:n[1][1]}function I(n){return 7*w(n)+12*O(n)}function C(n){var t=w(n);return 7*t-12*Math.floor(7*t/12)}function z(n){var t={};return function(r){return"string"!=typeof r?null:t[r]||(t[r]=n(r))}}function F(n){return Xt(n)||Yt(n)}function _(n){return A(n)?n:Xt(n)}function q(n){return y(n)?n:Yt(n)}function D(n){return h(n)?n:F(n)}function E(n){return A(n)?i.apply(null,v(n)):null}function G(n){if(!y(n))return null;var t=v(n),r=t[0]+1+7*t[2];return n[2]*r+P(r,t[1])}function U(n){return E(n)||G(n)}function k(n,t,r){return function(e){return function(u){if(n(u))return e(u);var o=t(u);return o?r(e(o)):null}}}function S(n,t){var r=g(t);if(!r)return null;var e=w(n)+w(t);if(j(t))return["tnlp",[e]];var u=O(n)+O(t);if("note"===r)return["tnlp",[e,u]];var o=I(n)+I(t)<0?-1:1;return["tnlp",[o*e,o*u],o]}function $(n,t){if(1===arguments.length)return function(t){return $(n,t)};var r=D(n),e=D(t),u=y(r)?S(r,e):y(e)?S(e,r):null;return n===r&&t===e?u:U(u)}function B(n,t){return arguments.length>1?B(n)(t):function(t){return $(n,d(t,0,1))}}function N(n,t){var r=g(t);if(!r)return null;var e=w(n)+w(t);if(j(t))return["tnlp",[e]];var u=O(n)+O(t);if("note"===r)return["tnlp",[e,u]];var o=I(n)+I(t)<0?-1:1;return["tnlp",[o*e,o*u],o]}function V(n,t){if(1===arguments.length)return function(t){return V(n,t)};var r=D(n),e=D(t);return r&&e?U(N(e,r)):null}function T(n,t){return 1===arguments.length?function(t){return T(n,t)}:V(t,n)}function R(n,t){return arguments.length>1?R(n)(t):function(t){return V(n,d(t,0,1))}}function K(n,t){if(!n||!t||n[1].length!==t[1].length)return null;var r=w(t)-w(n);if(j(n))return d(r,-Math.floor(7*r/12),1);var e=O(t)-O(n),u=I(t)-I(n)<0?-1:1;return d(u*r,u*e,u)}function L(n,t){return 1===arguments.length?function(t){return L(n,t)}:G(K(D(n),D(t)))}function H(n,t){var r=K(D(n),D(t));return r?I(r):null}function J(n){return n||0===n}function Q(n,t){return arguments.length>1?Q(n)(t):function(t){return ir(t).map(n)}}function W(n){return ir(n).filter(J)}function X(n,t){return arguments.length>1?X(n)(t):function(t){return ir(t).filter(n)}}function Y(n){if(!n)return-1/0;var t=7*w(n);return t+12*(O(n)||-Math.floor(t/12)-100)}function Z(n,t){return Y(n)-Y(t)}function nn(n,t){return-Z(n,t)}function tn(n,t){var r=1===arguments.length||!0===t?Z:!1===t?nn:"function"==typeof t?t:Z;return n=Array.isArray(n)?n.slice():ir(n),mn(function(n){return n.sort(r).filter(J)},n)}function rn(n){return $(d(0,n,1))}function en(n,t){var r=ir(t),e=r.length,u=(n%e+e)%e;return r.slice(u,e).concat(r.slice(0,u))}function un(n,t){if(1===arguments.length)return function(t){return un(n,t)};var r=ir(t);return ir(n).map(function(n){return r[n-1]||null})}function on(n){return 0===(n=ir(n)).length?[[]]:on(n.slice(1)).reduce(function(t,r){return t.concat(n.map(function(t,e){var u=r.slice();return u.splice(e,0,n[0]),u}))},[])}function cn(n){return U(n)||n}function an(n){return h(n)?U(n):or(n)?n.map(cn):n}function mn(n,t){if(1===arguments.length)return function(t){return mn(n,t)};var r=ir(t).map(D);return an(n(r))}function ln(n){var t=ir(n);return t.length?W(t.map(L(t[0]))):t}function Pn(n){var t=[];n=ir(n);for(var r=1;r<n.length;r++)t.push(L(n[r-1],n[r]));return t}function Mn(n,t){return arguments.length>1?Mn(n)(t):function(t){return W(Q($(t||"P1"),n))}}function fn(n,t){return Array(t+1).join(n)}function sn(n){return"number"==typeof n}function pn(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function dn(n,t,r){if("string"!=typeof n)return null;var e=lr.exec(n);if(!e||!t&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,"##")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt="b"===u.acc[0]?-u.acc.length:u.acc.length;var o=Pr[u.step]+u.alt;return u.chroma=o<0?12+o:o%12,e[3]&&(u.oct=+e[3],u.midi=o+12*(u.oct+1),u.freq=pn(u.midi,r)),t&&(u.tonicOf=e[4]),u}function hn(n){return sn(n)?n<0?fn("b",-n):fn("#",n):""}function bn(n){return sn(n)?""+n:""}function vn(n,t,r){return null===n||void 0===n?null:n.step?vn(n.step,n.alt,n.oct):n<0||n>6?null:Mr.charAt(n)+hn(t)+bn(r)}function gn(n){return"number"==typeof n}function An(n){return"string"==typeof n}function yn(n){return void 0!==n}function jn(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function xn(n,t,r){if("string"!=typeof n)return null;var e=fr.exec(n);if(!e||!t&&e[4])return null;var u={letter:e[1].toUpperCase(),acc:e[2].replace(/x/g,"##")};u.pc=u.letter+u.acc,u.step=(u.letter.charCodeAt(0)+3)%7,u.alt="b"===u.acc[0]?-u.acc.length:u.acc.length;var o=sr[u.step]+u.alt;return u.chroma=o<0?12+o:o%12,e[3]&&(u.oct=+e[3],u.midi=o+12*(u.oct+1),u.freq=jn(u.midi,r)),t&&(u.tonicOf=e[4]),u}function wn(n){if((gn(n)||An(n))&&n>=0&&n<128)return+n;var t=xn(n);return t&&yn(t.midi)?t.midi:null}function On(n){return Array.isArray(n)&&2===n.length?7*n[0]+12*n[1]+12:wn(n)}function In(n,t){return!0===n||!1===n?function(t){return In(t,n)}:(n=Math.round(n),(!0===t?dr:pr)[n%12]+(Math.floor(n/12)-1))}function Cn(n,t){return n=!(!n&&0!==n)&&Math.pow(10,n),function(r){return null===(r=t(r))?null:n?Math.round(r*n)/n:r}}function zn(n,t,r){return arguments.length>2?zn(n,t)(r):Cn(t,function(t){var r=On(t);return r?Math.pow(2,(r-69)/12)*n:null})}function Fn(n,t,r){return arguments.length>2?Fn(n,t)(r):Cn(t,function(t){return 12*(Math.log(t)-Math.log(n))/Math.log(2)+69})}function _n(n){return"string"!=typeof n?null:Ar[n]||(Ar[n]=dn(n))}function qn(n){var t=_(n);return t?E(t):null}function Dn(n){console.warn("note.props() is deprecated. Use: note.step(), note.alt() or note.oct()");var t=_(n);if(!t)return null;var r=v(t);return{step:r[0],alt:r[1],oct:r[2]}}function En(n){return function(t){var r=Dn(t);return r?r[n]:null}}function Gn(n){console.warn("Deprecated. Do you really need this?");var t=_(n);return t?w(t):null}function Un(n){var t=_(n);return t?E([t[0],[w(t)]]):null}function kn(n){console.warn("Deprecated. Use find() from tonal-enhramonics");var t=[];return t.push($(zr,n)),null===t[0]?null:(t.push(n),t.push($(Cr,n)),t)}function Sn(n){return _r[(n-1)%7]}function $n(n){return-1===n?"-":""}function Bn(n,t){return n+7*t}function Nn(n,t,r,e){return $n(e)+Bn(n,r)+Tn(n,t)}function Vn(n,t){return Array(Math.abs(t)+1).join(n)}function Tn(n,t){var r="number"==typeof n?Sn(Math.abs(n)):n;return 0===t?"M"===r?"M":"P":-1===t&&"M"===r?"m":t>0?Vn("A",t):t<0?Vn("d","P"===r?t:t+1):null}function Rn(n){var t=q(n);if(!t)return null;var r=v(t);return{num:r[0]+1+7*r[2],alt:r[1],dir:t[2]}}function Kn(n){if(!n||n.num<1)return null;var t=Math.floor(n.num/8);return Nn(n.num-7*t,n.alt||0,t,n.dir)}function Ln(n){var t=q(n),r=t?C(t):Math.round(n);return isNaN(r)?null:Er[Math.abs(r)%12]}function Hn(n){return parseInt(Qn(n),2)}function Jn(n){return(n=D(n))?C(n):null}function Qn(n){if(Xn(n))return n;var t=[0,0,0,0,0,0,0,0,0,0,0,0];return Q(Jn,n).forEach(function(n){t[n]=1}),t.join("")}function Wn(n,t){t=!1!==t;var r=Qn(n).split("");return W(r.map(function(n,e){var u=en(e,r);return t&&"0"===u[0]?null:u.join("")}))}function Xn(n){return $r.test(n)}function Yn(n){return W(Qn(n).split("").map(function(n,t){return"1"===n?Br[t]:null}))}function Zn(n,t){return console.warn("pcset.fromChroma is deprecated. Use pcset.intervals().map(...)"),1===arguments.length?function(t){return Zn(n,t)}:(t||(t="P1"),Yn(n).map($(t)))}function nt(n,t){return 1===arguments.length?function(t){return nt(n,t)}:Qn(n)===Qn(t)}function tt(n,t){return 1===arguments.length?function(t){return tt(n,t)}:((t=Hn(t))&Hn(n))===t}function rt(n,t){return 1===arguments.length?function(t){return rt(n,t)}:((t=Hn(t))|Hn(n))===t}function et(n,t){return arguments.length>1?et(n)(t):(n=Qn(n),function(t){return"1"===n[Jn(t)]})}function ut(n,t){return 1===arguments.length?function(t){return ut(n,t)}:ir(t).filter(et(n))}function ot(n){return"number"==typeof n}function it(n){return ot(n)?n:On(n)}function ct(n,t){for(var r=[];t--;r[t]=t+n);return r}function at(n,t){for(var r=[];t--;r[t]=n-t);return r}function mt(n,t){return null===n||null===t?[]:n<t?ct(n,t-n+1):at(n,n-t+1)}function lt(n){return ir(n).map(it).reduce(function(n,t,r){if(1===r)return mt(n,t);var e=n[n.length-1];return n.concat(mt(e,t).slice(1))})}function Pt(n,t){return Q(In(!0===t),lt(n))}function Mt(n,t){return 1===arguments.length?function(t){return Mt(n,t)}:ut(n,Pt(t))}function ft(n){return!(n<0||n>6)}function st(n){return/^b+$/.test(n)}function pt(n){return/^#+$/.test(n)}function dt(n,t){return Array(t+1).join(n)}function ht(n){return n?n<0?dt("b",-n):dt("#",n):""}function bt(n,t){return n?n+" "+t:t}function vt(n){return bt(B("C",n),"major")}function gt(n){return Kr[Rr.indexOf(n)]}function At(n){return n=n.trim().toLowerCase(),-1===Rr.indexOf(n)?null:n}function yt(n){if("string"!=typeof n)return null;var t,r=n.indexOf(" ");if(-1===r){var e=Un(n);t=e?{tonic:e,mode:"major"}:{tonic:!1,mode:At(n)}}else t={tonic:Un(n.slice(0,r)),mode:At(n.slice(r+1))};return t.mode?t:null}function jt(n,t){return 1===arguments.length?function(t){return jt(n,t)}:!(n=yt(n))||n.tonic?null:(t=yt(t))&&t.tonic?bt(B(t.tonic,gt(n.mode)-gt(t.mode)),n.mode):null}function xt(n){var t=yt(n);if(!t||!t.tonic)return null;var r=gt(t.mode);return Gn(t.tonic)-r}function wt(n){return ht(xt(n))}function Ot(n){return n}function It(n,t){t=t||Ot;var r={},e=Object.keys(n),u=[];return e.forEach(function(e){var o=t(n[e][0]);r[e]=o,n[e][1]&&n[e][1].forEach(function(n){r[n]=o,u.push(n)})}),{get:function(n){return r[n]},keys:function(n,t){var o=n?e.concat(u):e.slice();return"function"!=typeof t?o:o.filter(function(n){return t(n,r[n])})}}}function Ct(n,t){var r="string"==typeof t,e="function"==typeof t,u=n.keys(!1).reduce(function(t,r){return t[Qn(n.get(r))]=r,t},{});return function(n){return W(Wn(n=tn(Q(Un,n))).map(function(o,i){var c=u[o];if(!c)return null;var a=n[i];return r?a+t+c:e?t(c,a):[c,a]}))}}function zt(n,t){if(1===arguments.length)return function(t){return zt(n,t)};var r=Qr.get(n);return r?Mn(r,t):null}function Ft(n){return zt(_t(n).type,!1)||[]}function _t(n){if("string"!=typeof n)return null;var t=n.indexOf(" "),r=qn(n.substring(0,t))||!1;return{tonic:r,type:r?n.substring(t+1):n}}function qt(){return Zr}function Dt(n,t){if(1===arguments.length)return function(t){return Dt(n,t)};var r=ne.get(n);return r?Mn(r,t):null}function Et(n){var t=$t(n),r=ne.get(t.type);return r?Mn(r,t.tonic):W(Q(qn,n))}function Gt(n){var t=$t(n);return ne.get(t.type)||[]}function Ut(n,t){if(1===arguments.length)return function(t){return Ut(n,t)};var r=kt(t);return r?en(n,r):[]}function kt(n){for(var t=on(Et(n).map(Un)),r=0;r<t.length;r++)if(St(Pn(t[r])))return t[r];return null}function St(n){for(var t=0;t<n.length;t++)if("3"!==n[t][0])return!1;return!0}function $t(n){var t=qt().exec(n);return t?t[4]?"7"===t[3]||"6"===t[3]?{type:t[3]+t[4],tonic:t[1]+t[2]}:{type:t[4],tonic:t[1]+t[2]+t[3]}:{type:t[3],tonic:t[1]+t[2]}:{type:n,tonic:!1}}function Bt(n,t,r){return ht(t)+ue[n%7]+(r||"")}function Nt(n){var t=oe.exec(n);if(!t)return null;var r=ie[t[2].toLowerCase()]+1,e=t[1].length;return"b"===t[1][0]&&(e=-e),{root:Kn({num:r,alt:e,dir:1}),type:t[3]}}var Vt=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Tt=[0,2,4,5,7,9,11],Rt="CDEFGAB",Kt=new RegExp("^(?:(([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4}))|((AA|A|P|M|m|d|dd)([-+]?)(\\d+)))$"),Lt=[0,2,4,5,7,9,11],Ht="PMMPPMM",Jt=[0,2,4,-1,1,3,5],Qt=Jt.map(function(n){return Math.floor(7*n/12)}),Wt=[3,0,4,1,5,2,6],Xt=z(function(n){var t=e(n);return t?b(t.step,t.alt,t.oct):null}),Yt=z(function(n){var t=c(n);return t&&t?b(t.simple-1,t.alt,t.oct,t.dir):null}),Zt=k(A,Xt,E),nr=k(y,Yt,G),tr=k(h,F,U),rr=Object.freeze({pitch:d,isPitch:h,encode:b,decode:v,pType:g,isNotePitch:A,isIvlPitch:y,isPC:j,dir:x,fifths:w,focts:O,height:I,chr:C,parseNote:Xt,parseIvl:Yt,parsePitch:F,asNotePitch:_,asIvlPitch:q,asPitch:D,strNote:E,strIvl:G,strPitch:U,noteFn:Zt,ivlFn:nr,pitchFn:tr}),er=Object.freeze({transpose:$,trFifths:B}),ur=Object.freeze({transpose:V,transposeBy:T,add:function(n,t){if(1===arguments.length)return function(t){return T(n,t)};var r=D(n),e=D(t);return r&&e?U(N(r,e)):null},trFifths:R,interval:L,subtract:function(n,t){return L(t,n)},semitones:H}),or=Array.isArray,ir=function(n){return function(t){return void 0===t?[]:Array.isArray(t)?t:"string"==typeof t?t.trim().split(n):[t]}}(/\s*\|\s*|\s*,\s*|\s+/),cr=mn(function(n){for(var t,r,e=n.length;e;)t=Math.random()*e--|0,r=n[e],n[e]=n[t],n[t]=r;return n}),ar=Object.freeze({asArr:ir,map:Q,compact:W,filter:X,sort:tn,shuffle:cr,rotate:en,rotateAsc:function(n,t){return mn(function(t){var r=t.length,e=(n%r+r)%r,u=t.slice(e,r),o=t.slice(0,e),i=H(u[r-e-1],o[0]);if(i<0){var c=Math.floor(i/12);n<0?u=u.map(rn(c)):o=o.map(rn(-c))}return u.concat(o)},t)},select:un,permutations:on}),mr=Object.freeze({harmonics:ln,intervallic:Pn,harmonize:Mn}),lr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Pr=[0,2,4,5,7,9,11],Mr="CDEFGAB",fr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,sr=[0,2,4,5,7,9,11],pr="C Db D Eb E F Gb G Ab A Bb B".split(" "),dr="C C# D D# E F F# G G# A A# B".split(" "),hr=Object.freeze({toMidi:On,note:In}),br=zn(440,2),vr=Fn(440,2),gr=Object.freeze({eqTempFreq:zn,toFreq:br,eqTempFreqToMidi:Fn,toMidi:vr,note:function(n,t){return In(vr(n),t)},cents:function(n,t){var r=br(n)||n,e=br(t)||t;return Math.round(Math.log(e/r)/Math.log(2)*1200)}}),Ar={},yr=On,jr=In,xr=br,wr=En("oct"),Or=En("step"),Ir=En("alt"),Cr=Yt("2d"),zr=Yt("-2d"),Fr=Object.freeze({midi:yr,fromMidi:jr,freq:xr,chroma:function(n){var t=_n(n);return t?t.chroma:null},name:qn,note:function(n){return console.warn("note.note() is deprecated. Use note.name()"),qn(n)},props:Dn,fromProps:function(n){return console.warn("note.fromProps() is deprecated. See npm package note-parser."),n?vn(n.step,n.alt,n.oct):null},oct:wr,step:Or,pcFifths:Gn,alt:Ir,pc:Un,enharmonics:kn,simplify:function(n){return console.warn("Deprecated. Use simplify() from tonal-enhramonics"),kn(n).reduce(function(n,t){return n?n.length>t.length?t:n:t},null)}}),_r="PMMPPMM",qr=[1,2,2,3,3,4,5,5,6,6,7,7],Dr="P m M m M P d P m M m M".split(" "),Er=[0,1,2,3,4,5,6,5,4,3,2,1],Gr="PMMPPMM",Ur=nr(function(n){var t=v(n);return b((7-t[0])%7,"P"===Gr[t[0]]?-t[1]:-(t[1]+1),t[2],x(n))}),kr=nr(function(n){var t=v(n);return 0===t[0]&&1===t[2]||(t[2]=0),b(t[0],t[1],t[2],x(n))}),Sr=Object.freeze({toInterval:function(n){var t=q(n);return t?G(t):null},num:function(n){var t=Rn(n);return t?t.num:null},value:function(n){var t=Rn(n);return t?t.num*t.dir:null},props:Rn,fromProps:Kn,semitones:function(n){var t=q(n);return t?I(t):null},fromSemitones:function(n){var t=n<0?-1:1,r=Math.abs(n),e=r%12,u=Math.floor(r/12);return t*(qr[e]+7*u)+Dr[e]},ic:Ln,type:function(n){var t=q(n);return t?Gr[v(t)[0]]:null},invert:Ur,simplify:kr}),$r=/^[01]{12}$/,Br="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" "),Nr=Object.freeze({chroma:Qn,notes:function(n){console.warn("pcset.notes deprecated. Use collection.pcset");var t=Q(Un,n);if(!t.length)return t;var r=t[0];return Zn(en(Jn(r),Qn(t).split("")).join(""),r)},modes:Wn,chromaModes:function(n,t){return console.warn("pcset.chromaModes deprecated. Renamed to pcset.modes"),Wn(n,t)},isChroma:Xn,intervals:Yn,fromChroma:Zn,isEqual:nt,equal:function(n,t){return console.warn("pcset.equal is deprecated. Use pcset.isEqual"),nt(n,t)},isSubset:tt,subset:function(n,t){return console.warn("pcset.subset is deprecated. Use pcset.isSubset"),tt(n,t)},isSuperset:rt,superset:function(n,t){return console.warn("pcset.superset is deprecated. Use pcset.isSuperset"),rt(n,t)},includes:et,filter:ut}),Vr=Object.freeze({numeric:lt,chromatic:Pt,fifths:function(n,t){return lt(t).map(B(n))},pitchSet:Mt}),Tr=Object.freeze({toStep:function(n){var t="CDEFGAB".indexOf(n.toUpperCase());return t<0?null:t},isStep:ft,toLetter:function(n){return ft(n)?"CDEFGAB".charAt(n):null},areFlats:st,areSharps:pt,toAlt:function(n){return""===n?0:st(n)?-n.length:pt(n)?n.length:null},toAcc:ht}),Rr=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian","major","minor"],Kr=[0,2,4,-1,1,3,5,0,3],Lr=[0,1,2,3,4,5,6,0,5].map(function(n){return ln(en(n,["C","D","E","F","G","A","B"]))}),Hr=wt,Jr=Object.freeze({props:yt,isKeyName:function(n){return null!==yt(n)},tonic:function(n){return(yt(n)||n||{}).tonic||null},mode:function(n){return(yt(n)||n||{}).mode||null},relative:jt,alteredNotes:function(n){var t=xt(n);return null===t?null:t<0?lt([-1,t]).map(B("F")):lt([1,t]).map(B("B"))},modes:function(n){return n?Rr.slice():Rr.slice(0,-2)},fromAlter:function(n){return"number"==typeof n?vt(n):null},fromAcc:function(n){return pt(n)?vt(n.length):st(n)?vt(-n.length):null},scale:function(n){var t=yt(n);return t&&t.tonic?Mn(Lr[Rr.indexOf(t.mode)],t.tonic):null},alteration:xt,signature:wt,accidentals:Hr}),Qr=It({chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],prometheus:["1P 2M 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],diminished:["1P 2M 3m 4P 5d 6m 6M 7M"],egyptian:["1P 2M 4P 5P 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],spanish:["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},function(n){return n.split(" ")}),Wr=Qr.keys,Xr=Ct(Qr," "),Yr=Object.freeze({get:zt,names:Wr,notes:function(n){var t=_t(n);return(t.tonic?zt(t.type,Un(t.tonic)):null)||W(Q(Un,n).map(function(n,t,r){return r.indexOf(n)<t?null:n}))},intervals:Ft,isKnowScale:function(n){return Ft(n).length>0},parse:_t,detect:Xr}),Zr=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,ne=It({M:["1P 3M 5P",["Major",""]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6:["1P 3M 5P 13M",["6"]],M69:["1P 3M 5P 6M 9M",["69"]],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],addb9:["1P 3M 5P 9m"],m:["1P 3m 5P",["minor"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"],4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m#5":["1P 3m 5A",["m+","mb6"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m7#5":["1P 3m 6m 7m"],"m9#5":["1P 3m 6m 7m 9M"],"+add#9":["1P 3M 5A 9A"]},function(n){return n.split(" ")}),te=ne.keys,re=Ct(ne,""),ee=Object.freeze({names:te,get:Dt,notes:Et,intervals:Gt,isKnownChord:function(n){return Gt(n).length>0},detect:re,position:function(n){var t=Q(Un,n),r=kt(t);return r?r.indexOf(t[0]):null},inversion:Ut,parse:$t}),ue=["I","II","III","IV","V","VI","VII"],oe=/^\s*(b|bb|#|##|)(IV|III|II|I|VII|VI|V|iv|iii|ii|i|vii|vi|v)\s*(.*)\s*$/,ie={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6},ce=Object.freeze({abstract:function(n,t){t=Un(t);var r=W((n=Q($t,n)).map(function(n){return n.tonic}));return r.length!==n.length?null:r.map(function(r,e){var u=Rn(L(t,r));return Bt(u.num-1,u.alt,n[e].type)})},buildRoman:Bt,concrete:function(n,t){return Q(function(n){var r=Nt(n);return r?$(r.root,t)+r.type:null},n)},romanRegex:function(){return oe},parseRomanChord:Nt}),ae=Object.freeze({density:function(n){var t,r,e,u=W(Q(_,n)),o=u.length,i=[0,0,0,0,0,0];for(t=0;t<o;t++)for(r=t;r<o;r++)6===(e=Ln(C(u[r])-C(u[t])))?i[5]=i[5]+1:e>0&&(i[5-e]=i[5-e]+1);return i}}),me=Object.freeze({notes:function(n){return tn(n).filter(function(n,t,r){return 0===t||n!==r[t-1]})}}),le=Object.assign,Pe=le({},ar,er,mr,ur);return Pe.pitch=rr,Pe.notation=Tr,Pe.note=Fr,Pe.ivl=Sr,Pe.midi=hr,Pe.freq=gr,Pe.range=Vr,Pe.key=Jr,Pe.progression=ce,Pe.sonority=ae,Pe.pitchset=me,Pe.pcset=Nr,Pe.scale=function(n){return Pe.scale.notes(n)},le(Pe.scale,Yr),Pe.chord=function(n){return Pe.chord.notes(n)},le(Pe.chord,ee),"undefined"!=typeof window&&(window.Tonal=Pe),Pe});
//# sourceMappingURL=tonal.min.js.map
